{"version":3,"file":"frets.js","sources":["../../node_modules/maquette/dist/projection.js","../../node_modules/maquette/dist/dom.js","../../node_modules/maquette/dist/h.js","../../node_modules/maquette/dist/projector.js","../../node_modules/maquette/dist/cache.js","../../node_modules/maquette/dist/mapping.js","../../node_modules/search-params/dist/cjs/index.js","../../node_modules/path-parser/dist/es/path-parser.js","../module/Frets.js","../module/PropsFieldRegistry.js","../module/ActionsFieldRegistry.js"],"sourcesContent":["/* tslint:disable no-http-string */\r\nvar NAMESPACE_W3 = 'http://www.w3.org/';\r\n/* tslint:enable no-http-string */\r\nvar NAMESPACE_SVG = NAMESPACE_W3 + \"2000/svg\";\r\nvar NAMESPACE_XLINK = NAMESPACE_W3 + \"1999/xlink\";\r\nvar emptyArray = [];\r\nexport var extend = function (base, overrides) {\r\n    var result = {};\r\n    Object.keys(base).forEach(function (key) {\r\n        result[key] = base[key];\r\n    });\r\n    if (overrides) {\r\n        Object.keys(overrides).forEach(function (key) {\r\n            result[key] = overrides[key];\r\n        });\r\n    }\r\n    return result;\r\n};\r\nvar same = function (vnode1, vnode2) {\r\n    if (vnode1.vnodeSelector !== vnode2.vnodeSelector) {\r\n        return false;\r\n    }\r\n    if (vnode1.properties && vnode2.properties) {\r\n        if (vnode1.properties.key !== vnode2.properties.key) {\r\n            return false;\r\n        }\r\n        return vnode1.properties.bind === vnode2.properties.bind;\r\n    }\r\n    return !vnode1.properties && !vnode2.properties;\r\n};\r\nvar checkStyleValue = function (styleValue) {\r\n    if (typeof styleValue !== 'string') {\r\n        throw new Error('Style values must be strings');\r\n    }\r\n};\r\nvar findIndexOfChild = function (children, sameAs, start) {\r\n    if (sameAs.vnodeSelector !== '') {\r\n        // Never scan for text-nodes\r\n        for (var i = start; i < children.length; i++) {\r\n            if (same(children[i], sameAs)) {\r\n                return i;\r\n            }\r\n        }\r\n    }\r\n    return -1;\r\n};\r\nvar checkDistinguishable = function (childNodes, indexToCheck, parentVNode, operation) {\r\n    var childNode = childNodes[indexToCheck];\r\n    if (childNode.vnodeSelector === '') {\r\n        return; // Text nodes need not be distinguishable\r\n    }\r\n    var properties = childNode.properties;\r\n    var key = properties ? (properties.key === undefined ? properties.bind : properties.key) : undefined;\r\n    if (!key) { // A key is just assumed to be unique\r\n        for (var i = 0; i < childNodes.length; i++) {\r\n            if (i !== indexToCheck) {\r\n                var node = childNodes[i];\r\n                if (same(node, childNode)) {\r\n                    throw new Error(parentVNode.vnodeSelector + \" had a \" + childNode.vnodeSelector + \" child \" + (operation === 'added' ? operation : 'removed') + \", but there is now more than one. You must add unique key properties to make them distinguishable.\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\nvar nodeAdded = function (vNode) {\r\n    if (vNode.properties) {\r\n        var enterAnimation = vNode.properties.enterAnimation;\r\n        if (enterAnimation) {\r\n            enterAnimation(vNode.domNode, vNode.properties);\r\n        }\r\n    }\r\n};\r\nvar removedNodes = [];\r\nvar requestedIdleCallback = false;\r\nvar visitRemovedNode = function (node) {\r\n    (node.children || []).forEach(visitRemovedNode);\r\n    if (node.properties && node.properties.afterRemoved) {\r\n        node.properties.afterRemoved.apply(node.properties.bind || node.properties, [node.domNode]);\r\n    }\r\n};\r\nvar processPendingNodeRemovals = function () {\r\n    requestedIdleCallback = false;\r\n    removedNodes.forEach(visitRemovedNode);\r\n    removedNodes.length = 0;\r\n};\r\nvar scheduleNodeRemoval = function (vNode) {\r\n    removedNodes.push(vNode);\r\n    if (!requestedIdleCallback) {\r\n        requestedIdleCallback = true;\r\n        if (typeof window !== 'undefined' && 'requestIdleCallback' in window) {\r\n            window.requestIdleCallback(processPendingNodeRemovals, { timeout: 16 });\r\n        }\r\n        else {\r\n            setTimeout(processPendingNodeRemovals, 16);\r\n        }\r\n    }\r\n};\r\nvar nodeToRemove = function (vNode) {\r\n    var domNode = vNode.domNode;\r\n    if (vNode.properties) {\r\n        var exitAnimation = vNode.properties.exitAnimation;\r\n        if (exitAnimation) {\r\n            domNode.style.pointerEvents = 'none';\r\n            var removeDomNode = function () {\r\n                if (domNode.parentNode) {\r\n                    domNode.parentNode.removeChild(domNode);\r\n                    scheduleNodeRemoval(vNode);\r\n                }\r\n            };\r\n            exitAnimation(domNode, removeDomNode, vNode.properties);\r\n            return;\r\n        }\r\n    }\r\n    if (domNode.parentNode) {\r\n        domNode.parentNode.removeChild(domNode);\r\n        scheduleNodeRemoval(vNode);\r\n    }\r\n};\r\nvar setProperties = function (domNode, properties, projectionOptions) {\r\n    if (!properties) {\r\n        return;\r\n    }\r\n    var eventHandlerInterceptor = projectionOptions.eventHandlerInterceptor;\r\n    var propNames = Object.keys(properties);\r\n    var propCount = propNames.length;\r\n    var _loop_1 = function (i) {\r\n        var propName = propNames[i];\r\n        var propValue = properties[propName];\r\n        if (propName === 'className') {\r\n            throw new Error('Property \"className\" is not supported, use \"class\".');\r\n        }\r\n        else if (propName === 'class') {\r\n            toggleClasses(domNode, propValue, true);\r\n        }\r\n        else if (propName === 'classes') {\r\n            // object with string keys and boolean values\r\n            var classNames = Object.keys(propValue);\r\n            var classNameCount = classNames.length;\r\n            for (var j = 0; j < classNameCount; j++) {\r\n                var className = classNames[j];\r\n                if (propValue[className]) {\r\n                    domNode.classList.add(className);\r\n                }\r\n            }\r\n        }\r\n        else if (propName === 'styles') {\r\n            // object with string keys and string (!) values\r\n            var styleNames = Object.keys(propValue);\r\n            var styleCount = styleNames.length;\r\n            for (var j = 0; j < styleCount; j++) {\r\n                var styleName = styleNames[j];\r\n                var styleValue = propValue[styleName];\r\n                if (styleValue) {\r\n                    checkStyleValue(styleValue);\r\n                    projectionOptions.styleApplyer(domNode, styleName, styleValue);\r\n                }\r\n            }\r\n        }\r\n        else if (propName !== 'key' && propValue !== null && propValue !== undefined) {\r\n            var type = typeof propValue;\r\n            if (type === 'function') {\r\n                if (propName.lastIndexOf('on', 0) === 0) { // lastIndexOf(,0)===0 -> startsWith\r\n                    if (eventHandlerInterceptor) {\r\n                        propValue = eventHandlerInterceptor(propName, propValue, domNode, properties); // intercept eventhandlers\r\n                    }\r\n                    if (propName === 'oninput') {\r\n                        /* tslint:disable no-this-keyword no-invalid-this only-arrow-functions no-void-expression */\r\n                        (function () {\r\n                            // record the evt.target.value, because IE and Edge sometimes do a requestAnimationFrame between changing value and running oninput\r\n                            var oldPropValue = propValue;\r\n                            propValue = function (evt) {\r\n                                oldPropValue.apply(this, [evt]);\r\n                                evt.target['oninput-value'] = evt.target.value; // may be HTMLTextAreaElement as well\r\n                            };\r\n                        }());\r\n                        /* tslint:enable */\r\n                    }\r\n                    domNode[propName] = propValue;\r\n                }\r\n            }\r\n            else if (projectionOptions.namespace === NAMESPACE_SVG) {\r\n                if (propName === 'href') {\r\n                    domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\r\n                }\r\n                else {\r\n                    // all SVG attributes are read-only in DOM, so...\r\n                    domNode.setAttribute(propName, propValue);\r\n                }\r\n            }\r\n            else if (type === 'string' && propName !== 'value' && propName !== 'innerHTML') {\r\n                domNode.setAttribute(propName, propValue);\r\n            }\r\n            else {\r\n                domNode[propName] = propValue;\r\n            }\r\n        }\r\n    };\r\n    for (var i = 0; i < propCount; i++) {\r\n        _loop_1(i);\r\n    }\r\n};\r\nvar addChildren = function (domNode, children, projectionOptions) {\r\n    if (!children) {\r\n        return;\r\n    }\r\n    for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\r\n        var child = children_1[_i];\r\n        createDom(child, domNode, undefined, projectionOptions);\r\n    }\r\n};\r\nexport var initPropertiesAndChildren = function (domNode, vnode, projectionOptions) {\r\n    addChildren(domNode, vnode.children, projectionOptions); // children before properties, needed for value property of <select>.\r\n    if (vnode.text) {\r\n        domNode.textContent = vnode.text;\r\n    }\r\n    setProperties(domNode, vnode.properties, projectionOptions);\r\n    if (vnode.properties && vnode.properties.afterCreate) {\r\n        vnode.properties.afterCreate.apply(vnode.properties.bind || vnode.properties, [domNode, projectionOptions, vnode.vnodeSelector, vnode.properties, vnode.children]);\r\n    }\r\n};\r\nexport var createDom = function (vnode, parentNode, insertBefore, projectionOptions) {\r\n    var domNode;\r\n    var start = 0;\r\n    var vnodeSelector = vnode.vnodeSelector;\r\n    var doc = parentNode.ownerDocument;\r\n    if (vnodeSelector === '') {\r\n        domNode = vnode.domNode = doc.createTextNode(vnode.text);\r\n        if (insertBefore !== undefined) {\r\n            parentNode.insertBefore(domNode, insertBefore);\r\n        }\r\n        else {\r\n            parentNode.appendChild(domNode);\r\n        }\r\n    }\r\n    else {\r\n        for (var i = 0; i <= vnodeSelector.length; ++i) {\r\n            var c = vnodeSelector.charAt(i);\r\n            if (i === vnodeSelector.length || c === '.' || c === '#') {\r\n                var type = vnodeSelector.charAt(start - 1);\r\n                var found = vnodeSelector.slice(start, i);\r\n                if (type === '.') {\r\n                    domNode.classList.add(found);\r\n                }\r\n                else if (type === '#') {\r\n                    domNode.id = found;\r\n                }\r\n                else {\r\n                    if (found === 'svg') {\r\n                        projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\r\n                    }\r\n                    if (projectionOptions.namespace !== undefined) {\r\n                        domNode = vnode.domNode = doc.createElementNS(projectionOptions.namespace, found);\r\n                    }\r\n                    else {\r\n                        domNode = vnode.domNode = (vnode.domNode || doc.createElement(found));\r\n                        if (found === 'input' && vnode.properties && vnode.properties.type !== undefined) {\r\n                            // IE8 and older don't support setting input type after the DOM Node has been added to the document\r\n                            domNode.setAttribute('type', vnode.properties.type);\r\n                        }\r\n                    }\r\n                    if (insertBefore !== undefined) {\r\n                        parentNode.insertBefore(domNode, insertBefore);\r\n                    }\r\n                    else if (domNode.parentNode !== parentNode) {\r\n                        parentNode.appendChild(domNode);\r\n                    }\r\n                }\r\n                start = i + 1;\r\n            }\r\n        }\r\n        initPropertiesAndChildren(domNode, vnode, projectionOptions);\r\n    }\r\n};\r\nvar updateDom;\r\n/**\r\n * Adds or removes classes from an Element\r\n * @param domNode the element\r\n * @param classes a string separated list of classes\r\n * @param on true means add classes, false means remove\r\n */\r\nvar toggleClasses = function (domNode, classes, on) {\r\n    if (!classes) {\r\n        return;\r\n    }\r\n    classes.split(' ').forEach(function (classToToggle) {\r\n        if (classToToggle) {\r\n            domNode.classList.toggle(classToToggle, on);\r\n        }\r\n    });\r\n};\r\nvar updateProperties = function (domNode, previousProperties, properties, projectionOptions) {\r\n    if (!properties) {\r\n        return;\r\n    }\r\n    var propertiesUpdated = false;\r\n    var propNames = Object.keys(properties);\r\n    var propCount = propNames.length;\r\n    for (var i = 0; i < propCount; i++) {\r\n        var propName = propNames[i];\r\n        // assuming that properties will be nullified instead of missing is by design\r\n        var propValue = properties[propName];\r\n        var previousValue = previousProperties[propName];\r\n        if (propName === 'class') {\r\n            if (previousValue !== propValue) {\r\n                toggleClasses(domNode, previousValue, false);\r\n                toggleClasses(domNode, propValue, true);\r\n            }\r\n        }\r\n        else if (propName === 'classes') {\r\n            var classList = domNode.classList;\r\n            var classNames = Object.keys(propValue);\r\n            var classNameCount = classNames.length;\r\n            for (var j = 0; j < classNameCount; j++) {\r\n                var className = classNames[j];\r\n                var on = !!propValue[className];\r\n                var previousOn = !!previousValue[className];\r\n                if (on === previousOn) {\r\n                    continue;\r\n                }\r\n                propertiesUpdated = true;\r\n                if (on) {\r\n                    classList.add(className);\r\n                }\r\n                else {\r\n                    classList.remove(className);\r\n                }\r\n            }\r\n        }\r\n        else if (propName === 'styles') {\r\n            var styleNames = Object.keys(propValue);\r\n            var styleCount = styleNames.length;\r\n            for (var j = 0; j < styleCount; j++) {\r\n                var styleName = styleNames[j];\r\n                var newStyleValue = propValue[styleName];\r\n                var oldStyleValue = previousValue[styleName];\r\n                if (newStyleValue === oldStyleValue) {\r\n                    continue;\r\n                }\r\n                propertiesUpdated = true;\r\n                if (newStyleValue) {\r\n                    checkStyleValue(newStyleValue);\r\n                    projectionOptions.styleApplyer(domNode, styleName, newStyleValue);\r\n                }\r\n                else {\r\n                    projectionOptions.styleApplyer(domNode, styleName, '');\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!propValue && typeof previousValue === 'string') {\r\n                propValue = '';\r\n            }\r\n            if (propName === 'value') { // value can be manipulated by the user directly and using event.preventDefault() is not an option\r\n                var domValue = domNode[propName];\r\n                if (domValue !== propValue // The 'value' in the DOM tree !== newValue\r\n                    && (domNode['oninput-value']\r\n                        ? domValue === domNode['oninput-value'] // If the last reported value to 'oninput' does not match domValue, do nothing and wait for oninput\r\n                        : propValue !== previousValue // Only update the value if the vdom changed\r\n                    )) {\r\n                    // The edge cases are described in the tests\r\n                    domNode[propName] = propValue; // Reset the value, even if the virtual DOM did not change\r\n                    domNode['oninput-value'] = undefined;\r\n                } // else do not update the domNode, otherwise the cursor position would be changed\r\n                if (propValue !== previousValue) {\r\n                    propertiesUpdated = true;\r\n                }\r\n            }\r\n            else if (propValue !== previousValue) {\r\n                var type = typeof propValue;\r\n                if (type !== 'function' || !projectionOptions.eventHandlerInterceptor) { // Function updates are expected to be handled by the EventHandlerInterceptor\r\n                    if (projectionOptions.namespace === NAMESPACE_SVG) {\r\n                        if (propName === 'href') {\r\n                            domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\r\n                        }\r\n                        else {\r\n                            // all SVG attributes are read-only in DOM, so...\r\n                            domNode.setAttribute(propName, propValue);\r\n                        }\r\n                    }\r\n                    else if (type === 'string' && propName !== 'innerHTML') {\r\n                        if (propName === 'role' && propValue === '') {\r\n                            domNode.removeAttribute(propName);\r\n                        }\r\n                        else {\r\n                            domNode.setAttribute(propName, propValue);\r\n                        }\r\n                    }\r\n                    else if (domNode[propName] !== propValue) { // Comparison is here for side-effects in Edge with scrollLeft and scrollTop\r\n                        domNode[propName] = propValue;\r\n                    }\r\n                    propertiesUpdated = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return propertiesUpdated;\r\n};\r\nvar updateChildren = function (vnode, domNode, oldChildren, newChildren, projectionOptions) {\r\n    if (oldChildren === newChildren) {\r\n        return false;\r\n    }\r\n    oldChildren = oldChildren || emptyArray;\r\n    newChildren = newChildren || emptyArray;\r\n    var oldChildrenLength = oldChildren.length;\r\n    var newChildrenLength = newChildren.length;\r\n    var oldIndex = 0;\r\n    var newIndex = 0;\r\n    var i;\r\n    var textUpdated = false;\r\n    while (newIndex < newChildrenLength) {\r\n        var oldChild = (oldIndex < oldChildrenLength) ? oldChildren[oldIndex] : undefined;\r\n        var newChild = newChildren[newIndex];\r\n        if (oldChild !== undefined && same(oldChild, newChild)) {\r\n            textUpdated = updateDom(oldChild, newChild, projectionOptions) || textUpdated;\r\n            oldIndex++;\r\n        }\r\n        else {\r\n            var findOldIndex = findIndexOfChild(oldChildren, newChild, oldIndex + 1);\r\n            if (findOldIndex >= 0) {\r\n                // Remove preceding missing children\r\n                for (i = oldIndex; i < findOldIndex; i++) {\r\n                    nodeToRemove(oldChildren[i]);\r\n                    checkDistinguishable(oldChildren, i, vnode, 'removed');\r\n                }\r\n                textUpdated = updateDom(oldChildren[findOldIndex], newChild, projectionOptions) || textUpdated;\r\n                oldIndex = findOldIndex + 1;\r\n            }\r\n            else {\r\n                // New child\r\n                createDom(newChild, domNode, (oldIndex < oldChildrenLength) ? oldChildren[oldIndex].domNode : undefined, projectionOptions);\r\n                nodeAdded(newChild);\r\n                checkDistinguishable(newChildren, newIndex, vnode, 'added');\r\n            }\r\n        }\r\n        newIndex++;\r\n    }\r\n    if (oldChildrenLength > oldIndex) {\r\n        // Remove child fragments\r\n        for (i = oldIndex; i < oldChildrenLength; i++) {\r\n            nodeToRemove(oldChildren[i]);\r\n            checkDistinguishable(oldChildren, i, vnode, 'removed');\r\n        }\r\n    }\r\n    return textUpdated;\r\n};\r\nupdateDom = function (previous, vnode, projectionOptions) {\r\n    var domNode = previous.domNode;\r\n    var textUpdated = false;\r\n    if (previous === vnode) {\r\n        return false; // By contract, VNode objects may not be modified anymore after passing them to maquette\r\n    }\r\n    var updated = false;\r\n    if (vnode.vnodeSelector === '') {\r\n        if (vnode.text !== previous.text) {\r\n            var newTextNode = domNode.ownerDocument.createTextNode(vnode.text);\r\n            domNode.parentNode.replaceChild(newTextNode, domNode);\r\n            vnode.domNode = newTextNode;\r\n            textUpdated = true;\r\n            return textUpdated;\r\n        }\r\n        vnode.domNode = domNode;\r\n    }\r\n    else {\r\n        if (vnode.vnodeSelector.lastIndexOf('svg', 0) === 0) { // lastIndexOf(needle,0)===0 means StartsWith\r\n            projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\r\n        }\r\n        if (previous.text !== vnode.text) {\r\n            updated = true;\r\n            if (vnode.text === undefined) {\r\n                domNode.removeChild(domNode.firstChild); // the only textnode presumably\r\n            }\r\n            else {\r\n                domNode.textContent = vnode.text;\r\n            }\r\n        }\r\n        vnode.domNode = domNode;\r\n        updated = updateChildren(vnode, domNode, previous.children, vnode.children, projectionOptions) || updated;\r\n        updated = updateProperties(domNode, previous.properties, vnode.properties, projectionOptions) || updated;\r\n        if (vnode.properties && vnode.properties.afterUpdate) {\r\n            vnode.properties.afterUpdate.apply(vnode.properties.bind || vnode.properties, [domNode, projectionOptions, vnode.vnodeSelector, vnode.properties, vnode.children]);\r\n        }\r\n    }\r\n    if (updated && vnode.properties && vnode.properties.updateAnimation) {\r\n        vnode.properties.updateAnimation(domNode, vnode.properties, previous.properties);\r\n    }\r\n    return textUpdated;\r\n};\r\nexport var createProjection = function (vnode, projectionOptions) {\r\n    return {\r\n        getLastRender: function () { return vnode; },\r\n        update: function (updatedVnode) {\r\n            if (vnode.vnodeSelector !== updatedVnode.vnodeSelector) {\r\n                throw new Error('The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)');\r\n            }\r\n            var previousVNode = vnode;\r\n            vnode = updatedVnode;\r\n            updateDom(previousVNode, updatedVnode, projectionOptions);\r\n        },\r\n        domNode: vnode.domNode\r\n    };\r\n};\r\n//# sourceMappingURL=projection.js.map","import { createDom, createProjection, extend, initPropertiesAndChildren } from './projection';\r\nvar DEFAULT_PROJECTION_OPTIONS = {\r\n    namespace: undefined,\r\n    performanceLogger: function () { return undefined; },\r\n    eventHandlerInterceptor: undefined,\r\n    styleApplyer: function (domNode, styleName, value) {\r\n        // Provides a hook to add vendor prefixes for browsers that still need it.\r\n        domNode.style[styleName] = value;\r\n    }\r\n};\r\nexport var applyDefaultProjectionOptions = function (projectorOptions) {\r\n    return extend(DEFAULT_PROJECTION_OPTIONS, projectorOptions);\r\n};\r\nexport var dom = {\r\n    /**\r\n     * Creates a real DOM tree from `vnode`. The [[Projection]] object returned will contain the resulting DOM Node in\r\n     * its [[Projection.domNode|domNode]] property.\r\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n     * objects may only be rendered once.\r\n     * @param projectionOptions - Options to be used to create and update the projection.\r\n     * @returns The [[Projection]] which also contains the DOM Node that was created.\r\n     */\r\n    create: function (vnode, projectionOptions) {\r\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n        createDom(vnode, document.createElement('div'), undefined, projectionOptions);\r\n        return createProjection(vnode, projectionOptions);\r\n    },\r\n    /**\r\n     * Appends a new child node to the DOM which is generated from a [[VNode]].\r\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n     * @param parentNode - The parent node for the new child node.\r\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n     * objects may only be rendered once.\r\n     * @param projectionOptions - Options to be used to create and update the [[Projection]].\r\n     * @returns The [[Projection]] that was created.\r\n     */\r\n    append: function (parentNode, vnode, projectionOptions) {\r\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n        createDom(vnode, parentNode, undefined, projectionOptions);\r\n        return createProjection(vnode, projectionOptions);\r\n    },\r\n    /**\r\n     * Inserts a new DOM node which is generated from a [[VNode]].\r\n     * This is a low-level method. Users wil typically use a [[Projector]] instead.\r\n     * @param beforeNode - The node that the DOM Node is inserted before.\r\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function.\r\n     * NOTE: [[VNode]] objects may only be rendered once.\r\n     * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\r\n     * @returns The [[Projection]] that was created.\r\n     */\r\n    insertBefore: function (beforeNode, vnode, projectionOptions) {\r\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n        createDom(vnode, beforeNode.parentNode, beforeNode, projectionOptions);\r\n        return createProjection(vnode, projectionOptions);\r\n    },\r\n    /**\r\n     * Merges a new DOM node which is generated from a [[VNode]] with an existing DOM Node.\r\n     * This means that the virtual DOM and the real DOM will have one overlapping element.\r\n     * Therefore the selector for the root [[VNode]] will be ignored, but its properties and children will be applied to the Element provided.\r\n     * This is a low-level method. Users wil typically use a [[Projector]] instead.\r\n     * @param element - The existing element to adopt as the root of the new virtual DOM. Existing attributes and child nodes are preserved.\r\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]] objects\r\n     * may only be rendered once.\r\n     * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\r\n     * @returns The [[Projection]] that was created.\r\n     */\r\n    merge: function (element, vnode, projectionOptions) {\r\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n        vnode.domNode = element;\r\n        initPropertiesAndChildren(element, vnode, projectionOptions);\r\n        return createProjection(vnode, projectionOptions);\r\n    },\r\n    /**\r\n     * Replaces an existing DOM node with a node generated from a [[VNode]].\r\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n     * @param element - The node for the [[VNode]] to replace.\r\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n     * objects may only be rendered once.\r\n     * @param projectionOptions - Options to be used to create and update the [[Projection]].\r\n     * @returns The [[Projection]] that was created.\r\n     */\r\n    replace: function (element, vnode, projectionOptions) {\r\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n        createDom(vnode, element.parentNode, element, projectionOptions);\r\n        element.parentNode.removeChild(element);\r\n        return createProjection(vnode, projectionOptions);\r\n    }\r\n};\r\n//# sourceMappingURL=dom.js.map","/* tslint:disable function-name */\r\nvar toTextVNode = function (data) {\r\n    return {\r\n        vnodeSelector: '',\r\n        properties: undefined,\r\n        children: undefined,\r\n        text: data.toString(),\r\n        domNode: null\r\n    };\r\n};\r\nvar appendChildren = function (parentSelector, insertions, main) {\r\n    for (var i = 0, length_1 = insertions.length; i < length_1; i++) {\r\n        var item = insertions[i];\r\n        if (Array.isArray(item)) {\r\n            appendChildren(parentSelector, item, main);\r\n        }\r\n        else {\r\n            if (item !== null && item !== undefined && item !== false) {\r\n                if (typeof item === 'string') {\r\n                    item = toTextVNode(item);\r\n                }\r\n                main.push(item);\r\n            }\r\n        }\r\n    }\r\n};\r\nexport function h(selector, properties, children) {\r\n    if (Array.isArray(properties)) {\r\n        children = properties;\r\n        properties = undefined;\r\n    }\r\n    else if ((properties && (typeof properties === 'string' || properties.hasOwnProperty('vnodeSelector'))) ||\r\n        (children && (typeof children === 'string' || children.hasOwnProperty('vnodeSelector')))) {\r\n        throw new Error('h called with invalid arguments');\r\n    }\r\n    var text;\r\n    var flattenedChildren;\r\n    // Recognize a common special case where there is only a single text node\r\n    if (children && children.length === 1 && typeof children[0] === 'string') {\r\n        text = children[0];\r\n    }\r\n    else if (children) {\r\n        flattenedChildren = [];\r\n        appendChildren(selector, children, flattenedChildren);\r\n        if (flattenedChildren.length === 0) {\r\n            flattenedChildren = undefined;\r\n        }\r\n    }\r\n    return {\r\n        vnodeSelector: selector,\r\n        properties: properties,\r\n        children: flattenedChildren,\r\n        text: (text === '') ? undefined : text,\r\n        domNode: null\r\n    };\r\n}\r\n//# sourceMappingURL=h.js.map","import { applyDefaultProjectionOptions, dom } from './dom';\r\nvar createParentNodePath = function (node, rootNode) {\r\n    var parentNodePath = [];\r\n    while (node !== rootNode) {\r\n        parentNodePath.push(node);\r\n        node = node.parentNode;\r\n    }\r\n    return parentNodePath;\r\n};\r\nvar find;\r\nif (Array.prototype.find) {\r\n    find = function (items, predicate) { return items.find(predicate); };\r\n}\r\nelse {\r\n    find = function (items, predicate) { return items.filter(predicate)[0]; };\r\n}\r\nvar findVNodeByParentNodePath = function (vnode, parentNodePath) {\r\n    var result = vnode;\r\n    parentNodePath.forEach(function (node) {\r\n        result = (result && result.children) ? find(result.children, function (child) { return child.domNode === node; }) : undefined;\r\n    });\r\n    return result;\r\n};\r\nvar createEventHandlerInterceptor = function (projector, getProjection, performanceLogger) {\r\n    var modifiedEventHandler = function (evt) {\r\n        performanceLogger('domEvent', evt);\r\n        var projection = getProjection();\r\n        var parentNodePath = createParentNodePath(evt.currentTarget, projection.domNode);\r\n        parentNodePath.reverse();\r\n        var matchingVNode = findVNodeByParentNodePath(projection.getLastRender(), parentNodePath);\r\n        projector.scheduleRender();\r\n        var result;\r\n        if (matchingVNode) {\r\n            /* tslint:disable no-invalid-this */\r\n            result = matchingVNode.properties[\"on\" + evt.type].apply(matchingVNode.properties.bind || this, arguments);\r\n            /* tslint:enable no-invalid-this */\r\n        }\r\n        performanceLogger('domEventProcessed', evt);\r\n        return result;\r\n    };\r\n    return function (propertyName, eventHandler, domNode, properties) { return modifiedEventHandler; };\r\n};\r\n/**\r\n * Creates a [[Projector]] instance using the provided projectionOptions.\r\n *\r\n * For more information, see [[Projector]].\r\n *\r\n * @param projectorOptions   Options that influence how the DOM is rendered and updated.\r\n */\r\nexport var createProjector = function (projectorOptions) {\r\n    var projector;\r\n    var projectionOptions = applyDefaultProjectionOptions(projectorOptions);\r\n    var performanceLogger = projectionOptions.performanceLogger;\r\n    var renderCompleted = true;\r\n    var scheduled;\r\n    var stopped = false;\r\n    var projections = [];\r\n    var renderFunctions = []; // matches the projections array\r\n    var addProjection = function (\r\n    /* one of: dom.append, dom.insertBefore, dom.replace, dom.merge */\r\n    domFunction, \r\n    /* the parameter of the domFunction */\r\n    node, renderFunction) {\r\n        var projection;\r\n        var getProjection = function () { return projection; };\r\n        projectionOptions.eventHandlerInterceptor = createEventHandlerInterceptor(projector, getProjection, performanceLogger);\r\n        projection = domFunction(node, renderFunction(), projectionOptions);\r\n        projections.push(projection);\r\n        renderFunctions.push(renderFunction);\r\n    };\r\n    var doRender = function () {\r\n        scheduled = undefined;\r\n        if (!renderCompleted) {\r\n            return; // The last render threw an error, it should have been logged in the browser console.\r\n        }\r\n        renderCompleted = false;\r\n        performanceLogger('renderStart', undefined);\r\n        for (var i = 0; i < projections.length; i++) {\r\n            var updatedVnode = renderFunctions[i]();\r\n            performanceLogger('rendered', undefined);\r\n            projections[i].update(updatedVnode);\r\n            performanceLogger('patched', undefined);\r\n        }\r\n        performanceLogger('renderDone', undefined);\r\n        renderCompleted = true;\r\n    };\r\n    projector = {\r\n        renderNow: doRender,\r\n        scheduleRender: function () {\r\n            if (!scheduled && !stopped) {\r\n                scheduled = requestAnimationFrame(doRender);\r\n            }\r\n        },\r\n        stop: function () {\r\n            if (scheduled) {\r\n                cancelAnimationFrame(scheduled);\r\n                scheduled = undefined;\r\n            }\r\n            stopped = true;\r\n        },\r\n        resume: function () {\r\n            stopped = false;\r\n            renderCompleted = true;\r\n            projector.scheduleRender();\r\n        },\r\n        append: function (parentNode, renderFunction) {\r\n            addProjection(dom.append, parentNode, renderFunction);\r\n        },\r\n        insertBefore: function (beforeNode, renderFunction) {\r\n            addProjection(dom.insertBefore, beforeNode, renderFunction);\r\n        },\r\n        merge: function (domNode, renderFunction) {\r\n            addProjection(dom.merge, domNode, renderFunction);\r\n        },\r\n        replace: function (domNode, renderFunction) {\r\n            addProjection(dom.replace, domNode, renderFunction);\r\n        },\r\n        detach: function (renderFunction) {\r\n            for (var i = 0; i < renderFunctions.length; i++) {\r\n                if (renderFunctions[i] === renderFunction) {\r\n                    renderFunctions.splice(i, 1);\r\n                    return projections.splice(i, 1)[0];\r\n                }\r\n            }\r\n            throw new Error('renderFunction was not found');\r\n        }\r\n    };\r\n    return projector;\r\n};\r\n//# sourceMappingURL=projector.js.map","/**\r\n * Creates a [[CalculationCache]] object, useful for caching [[VNode]] trees.\r\n * In practice, caching of [[VNode]] trees is not needed, because achieving 60 frames per second is almost never a problem.\r\n * For more information, see [[CalculationCache]].\r\n *\r\n * @param <Result> The type of the value that is cached.\r\n */\r\nexport var createCache = function () {\r\n    var cachedInputs;\r\n    var cachedOutcome;\r\n    return {\r\n        invalidate: function () {\r\n            cachedOutcome = undefined;\r\n            cachedInputs = undefined;\r\n        },\r\n        result: function (inputs, calculation) {\r\n            if (cachedInputs) {\r\n                for (var i = 0; i < inputs.length; i++) {\r\n                    if (cachedInputs[i] !== inputs[i]) {\r\n                        cachedOutcome = undefined;\r\n                    }\r\n                }\r\n            }\r\n            if (!cachedOutcome) {\r\n                cachedOutcome = calculation();\r\n                cachedInputs = inputs;\r\n            }\r\n            return cachedOutcome;\r\n        }\r\n    };\r\n};\r\n//# sourceMappingURL=cache.js.map","/**\r\n * Creates a {@link Mapping} instance that keeps an array of result objects synchronized with an array of source objects.\r\n * See {@link http://maquettejs.org/docs/arrays.html|Working with arrays}.\r\n *\r\n * @param <Source>       The type of source items. A database-record for instance.\r\n * @param <Target>       The type of target items. A [[MaquetteComponent]] for instance.\r\n * @param getSourceKey   `function(source)` that must return a key to identify each source object. The result must either be a string or a number.\r\n * @param createResult   `function(source, index)` that must create a new result object from a given source. This function is identical\r\n *                       to the `callback` argument in `Array.map(callback)`.\r\n * @param updateResult   `function(source, target, index)` that updates a result to an updated source.\r\n */\r\nexport var createMapping = function (getSourceKey, createResult, updateResult) {\r\n    var keys = [];\r\n    var results = [];\r\n    return {\r\n        results: results,\r\n        map: function (newSources) {\r\n            var newKeys = newSources.map(getSourceKey);\r\n            var oldTargets = results.slice();\r\n            var oldIndex = 0;\r\n            for (var i = 0; i < newSources.length; i++) {\r\n                var source = newSources[i];\r\n                var sourceKey = newKeys[i];\r\n                if (sourceKey === keys[oldIndex]) {\r\n                    results[i] = oldTargets[oldIndex];\r\n                    updateResult(source, oldTargets[oldIndex], i);\r\n                    oldIndex++;\r\n                }\r\n                else {\r\n                    var found = false;\r\n                    for (var j = 1; j < keys.length + 1; j++) {\r\n                        var searchIndex = (oldIndex + j) % keys.length;\r\n                        if (keys[searchIndex] === sourceKey) {\r\n                            results[i] = oldTargets[searchIndex];\r\n                            updateResult(newSources[i], oldTargets[searchIndex], i);\r\n                            oldIndex = searchIndex + 1;\r\n                            found = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!found) {\r\n                        results[i] = createResult(source, i);\r\n                    }\r\n                }\r\n            }\r\n            results.length = newSources.length;\r\n            keys = newKeys;\r\n        }\r\n    };\r\n};\r\n//# sourceMappingURL=mapping.js.map","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar makeOptions = function (opts) {\r\n    if (opts === void 0) { opts = {}; }\r\n    return ({\r\n        arrayFormat: opts.arrayFormat || 'none',\r\n        booleanFormat: opts.booleanFormat || 'none',\r\n        nullFormat: opts.nullFormat || 'default'\r\n    });\r\n};\r\nvar encodeValue = function (value) { return encodeURIComponent(value); };\r\nvar decodeValue = function (value) { return decodeURIComponent(value); };\r\nvar encodeBoolean = function (name, value, opts) {\r\n    if (opts.booleanFormat === 'empty-true' && value) {\r\n        return name;\r\n    }\r\n    var encodedValue;\r\n    if (opts.booleanFormat === 'unicode') {\r\n        encodedValue = value ? '✓' : '✗';\r\n    }\r\n    else {\r\n        encodedValue = value.toString();\r\n    }\r\n    return name + \"=\" + encodedValue;\r\n};\r\nvar encodeNull = function (name, opts) {\r\n    if (opts.nullFormat === 'hidden') {\r\n        return '';\r\n    }\r\n    if (opts.nullFormat === 'string') {\r\n        return name + \"=null\";\r\n    }\r\n    return name;\r\n};\r\nvar getNameEncoder = function (opts) {\r\n    if (opts.arrayFormat === 'index') {\r\n        return function (name, index) { return name + \"[\" + index + \"]\"; };\r\n    }\r\n    if (opts.arrayFormat === 'brackets') {\r\n        return function (name) { return name + \"[]\"; };\r\n    }\r\n    return function (name) { return name; };\r\n};\r\nvar encodeArray = function (name, arr, opts) {\r\n    var encodeName = getNameEncoder(opts);\r\n    return arr\r\n        .map(function (val, index) { return encodeName(name, index) + \"=\" + encodeValue(val); })\r\n        .join('&');\r\n};\r\nvar encode = function (name, value, opts) {\r\n    if (value === null) {\r\n        return encodeNull(name, opts);\r\n    }\r\n    if (typeof value === 'boolean') {\r\n        return encodeBoolean(name, value, opts);\r\n    }\r\n    if (Array.isArray(value)) {\r\n        return encodeArray(name, value, opts);\r\n    }\r\n    return name + \"=\" + encodeValue(value);\r\n};\r\nvar decode = function (value, opts) {\r\n    if (value === undefined) {\r\n        return opts.booleanFormat === 'empty-true' ? true : null;\r\n    }\r\n    if (opts.booleanFormat === 'string') {\r\n        if (value === 'true') {\r\n            return true;\r\n        }\r\n        if (value === 'false') {\r\n            return false;\r\n        }\r\n    }\r\n    else if (opts.booleanFormat === 'unicode') {\r\n        if (decodeValue(value) === '✓') {\r\n            return true;\r\n        }\r\n        if (decodeValue(value) === '✗') {\r\n            return false;\r\n        }\r\n    }\r\n    else if (opts.nullFormat === 'string') {\r\n        if (value === 'null') {\r\n            return null;\r\n        }\r\n    }\r\n    return decodeValue(value);\r\n};\n\nvar getSearch = function (path) {\r\n    var pos = path.indexOf('?');\r\n    if (pos === -1) {\r\n        return path;\r\n    }\r\n    return path.slice(pos + 1);\r\n};\r\nvar isSerialisable = function (val) { return val !== undefined; };\r\nvar parseName = function (name) {\r\n    var bracketPosition = name.indexOf('[');\r\n    var hasBrackets = bracketPosition !== -1;\r\n    return {\r\n        hasBrackets: hasBrackets,\r\n        name: hasBrackets ? name.slice(0, bracketPosition) : name\r\n    };\r\n};\n\n/**\r\n * Parse a querystring and return an object of parameters\r\n */\r\nvar parse = function (path, opts) {\r\n    var options = makeOptions(opts);\r\n    return getSearch(path)\r\n        .split('&')\r\n        .reduce(function (params, param) {\r\n        var _a = param.split('='), rawName = _a[0], value = _a[1];\r\n        var _b = parseName(rawName), hasBrackets = _b.hasBrackets, name = _b.name;\r\n        var currentValue = params[name];\r\n        var decodedValue = decode(value, options);\r\n        if (currentValue === undefined) {\r\n            params[name] = hasBrackets ? [decodedValue] : decodedValue;\r\n        }\r\n        else {\r\n            params[name] = [].concat(currentValue, decodedValue);\r\n        }\r\n        return params;\r\n    }, {});\r\n};\r\n/**\r\n * Build a querystring from an object of parameters\r\n */\r\nvar build = function (params, opts) {\r\n    var options = makeOptions(opts);\r\n    return Object.keys(params)\r\n        .filter(function (paramName) { return isSerialisable(params[paramName]); })\r\n        .map(function (paramName) { return encode(paramName, params[paramName], options); })\r\n        .filter(Boolean)\r\n        .join('&');\r\n};\r\n/**\r\n * Remove a list of parameters from a querystring\r\n */\r\nvar omit = function (path, paramsToOmit, opts) {\r\n    var options = makeOptions(opts);\r\n    var searchPart = getSearch(path);\r\n    if (searchPart === '') {\r\n        return {\r\n            querystring: '',\r\n            removedParams: {}\r\n        };\r\n    }\r\n    var _a = path.split('&').reduce(function (_a, chunk) {\r\n        var left = _a[0], right = _a[1];\r\n        var rawName = chunk.split('=')[0];\r\n        var name = parseName(rawName).name;\r\n        return paramsToOmit.indexOf(name) === -1\r\n            ? [left.concat(chunk), right]\r\n            : [left, right.concat(chunk)];\r\n    }, [[], []]), kept = _a[0], removed = _a[1];\r\n    return {\r\n        querystring: kept.join('&'),\r\n        removedParams: parse(removed.join('&'), options)\r\n    };\r\n};\r\n/**\r\n * Remove a list of parameters from a querystring\r\n */\r\nvar keep = function (path, paramsToKeep, opts) {\r\n    var options = makeOptions(opts);\r\n    var searchPart = getSearch(path);\r\n    if (searchPart === '') {\r\n        return {\r\n            keptParams: {},\r\n            querystring: ''\r\n        };\r\n    }\r\n    var _a = path.split('&').reduce(function (_a, chunk) {\r\n        var left = _a[0], right = _a[1];\r\n        var rawName = chunk.split('=')[0];\r\n        var name = parseName(rawName).name;\r\n        return paramsToKeep.indexOf(name) >= 0\r\n            ? [left.concat(chunk), right]\r\n            : [left, right.concat(chunk)];\r\n    }, [[], []]), kept = _a[0], removed = _a[1];\r\n    return {\r\n        keptParams: parse(kept.join('&'), options),\r\n        querystring: kept.join('&')\r\n    };\r\n};\n\nexports.parse = parse;\nexports.build = build;\nexports.omit = omit;\nexports.keep = keep;\n","import { build, parse } from 'search-params';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n};\n\nvar defaultOrConstrained = function (match) {\r\n    return '(' +\r\n        (match ? match.replace(/(^<|>$)/g, '') : \"[a-zA-Z0-9-_.~%':|=+\\\\*@]+\") +\r\n        ')';\r\n};\r\nvar rules = [\r\n    {\r\n        name: 'url-parameter',\r\n        pattern: /^:([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,\r\n        regex: function (match) {\r\n            return new RegExp(defaultOrConstrained(match[2]));\r\n        }\r\n    },\r\n    {\r\n        name: 'url-parameter-splat',\r\n        pattern: /^\\*([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/,\r\n        regex: /([^?]*)/\r\n    },\r\n    {\r\n        name: 'url-parameter-matrix',\r\n        pattern: /^;([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,\r\n        regex: function (match) {\r\n            return new RegExp(';' + match[1] + '=' + defaultOrConstrained(match[2]));\r\n        }\r\n    },\r\n    {\r\n        name: 'query-parameter',\r\n        pattern: /^(?:\\?|&)(?::)?([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/\r\n    },\r\n    {\r\n        name: 'delimiter',\r\n        pattern: /^(\\/|\\?)/,\r\n        regex: function (match) { return new RegExp('\\\\' + match[0]); }\r\n    },\r\n    {\r\n        name: 'sub-delimiter',\r\n        pattern: /^(!|&|-|_|\\.|;)/,\r\n        regex: function (match) { return new RegExp(match[0]); }\r\n    },\r\n    {\r\n        name: 'fragment',\r\n        pattern: /^([0-9a-zA-Z]+)/,\r\n        regex: function (match) { return new RegExp(match[0]); }\r\n    }\r\n];\n\nvar tokenise = function (str, tokens) {\r\n    if (tokens === void 0) { tokens = []; }\r\n    // Look for a matching rule\r\n    var matched = rules.some(function (rule) {\r\n        var match = str.match(rule.pattern);\r\n        if (!match) {\r\n            return false;\r\n        }\r\n        tokens.push({\r\n            type: rule.name,\r\n            match: match[0],\r\n            val: match.slice(1, 2),\r\n            otherVal: match.slice(2),\r\n            regex: rule.regex instanceof Function ? rule.regex(match) : rule.regex\r\n        });\r\n        if (match[0].length < str.length) {\r\n            tokens = tokenise(str.substr(match[0].length), tokens);\r\n        }\r\n        return true;\r\n    });\r\n    // If no rules matched, throw an error (possible malformed path)\r\n    if (!matched) {\r\n        throw new Error(\"Could not parse path '\" + str + \"'\");\r\n    }\r\n    return tokens;\r\n};\n\nvar identity = function (_) { return _; };\r\nvar exists = function (val) { return val !== undefined && val !== null; };\r\nvar optTrailingSlash = function (source, strictTrailingSlash) {\r\n    if (strictTrailingSlash) {\r\n        return source;\r\n    }\r\n    if (source === '\\\\/') {\r\n        return source;\r\n    }\r\n    return source.replace(/\\\\\\/$/, '') + '(?:\\\\/)?';\r\n};\r\nvar upToDelimiter = function (source, delimiter) {\r\n    if (!delimiter) {\r\n        return source;\r\n    }\r\n    return /(\\/)$/.test(source) ? source : source + '(\\\\/|\\\\?|\\\\.|;|$)';\r\n};\r\nvar appendQueryParam = function (params, param, val) {\r\n    if (val === void 0) { val = ''; }\r\n    var existingVal = params[param];\r\n    if (existingVal === undefined) {\r\n        params[param] = val;\r\n    }\r\n    else {\r\n        params[param] = Array.isArray(existingVal)\r\n            ? existingVal.concat(val)\r\n            : [existingVal, val];\r\n    }\r\n    return params;\r\n};\r\nvar Path = /** @class */ (function () {\r\n    function Path(path) {\r\n        if (!path) {\r\n            throw new Error('Missing path in Path constructor');\r\n        }\r\n        this.path = path;\r\n        this.tokens = tokenise(path);\r\n        this.hasUrlParams =\r\n            this.tokens.filter(function (t) { return /^url-parameter/.test(t.type); }).length > 0;\r\n        this.hasSpatParam =\r\n            this.tokens.filter(function (t) { return /splat$/.test(t.type); }).length > 0;\r\n        this.hasMatrixParams =\r\n            this.tokens.filter(function (t) { return /matrix$/.test(t.type); }).length > 0;\r\n        this.hasQueryParams =\r\n            this.tokens.filter(function (t) { return /^query-parameter/.test(t.type); }).length > 0;\r\n        // Extract named parameters from tokens\r\n        this.spatParams = this.getParams('url-parameter-splat');\r\n        this.urlParams = this.getParams(/^url-parameter/);\r\n        // Query params\r\n        this.queryParams = this.getParams('query-parameter');\r\n        // All params\r\n        this.params = this.urlParams.concat(this.queryParams);\r\n        // Check if hasQueryParams\r\n        // Regular expressions for url part only (full and partial match)\r\n        this.source = this.tokens\r\n            .filter(function (t) { return t.regex !== undefined; })\r\n            .map(function (r) { return r.regex.source; })\r\n            .join('');\r\n    }\r\n    Path.createPath = function (path) {\r\n        return new Path(path);\r\n    };\r\n    Path.prototype.isQueryParam = function (name) {\r\n        return this.queryParams.indexOf(name) !== -1;\r\n    };\r\n    Path.prototype.test = function (path, opts) {\r\n        var _this = this;\r\n        var options = __assign({ strictTrailingSlash: false, queryParams: {} }, opts);\r\n        // trailingSlash: falsy => non optional, truthy => optional\r\n        var source = optTrailingSlash(this.source, options.strictTrailingSlash);\r\n        // Check if exact match\r\n        var match = this.urlTest(path, source + (this.hasQueryParams ? '(\\\\?.*$|$)' : '$'), opts);\r\n        // If no match, or no query params, no need to go further\r\n        if (!match || !this.hasQueryParams) {\r\n            return match;\r\n        }\r\n        // Extract query params\r\n        var queryParams = parse(path, options.queryParams);\r\n        var unexpectedQueryParams = Object.keys(queryParams).filter(function (p) { return !_this.isQueryParam(p); });\r\n        if (unexpectedQueryParams.length === 0) {\r\n            // Extend url match\r\n            Object.keys(queryParams).forEach(function (p) { return (match[p] = queryParams[p]); });\r\n            return match;\r\n        }\r\n        return null;\r\n    };\r\n    Path.prototype.partialTest = function (path, opts) {\r\n        var _this = this;\r\n        var options = __assign({ delimited: true, queryParams: {} }, opts);\r\n        // Check if partial match (start of given path matches regex)\r\n        // trailingSlash: falsy => non optional, truthy => optional\r\n        var source = upToDelimiter(this.source, options.delimited);\r\n        var match = this.urlTest(path, source, options);\r\n        if (!match) {\r\n            return match;\r\n        }\r\n        if (!this.hasQueryParams) {\r\n            return match;\r\n        }\r\n        var queryParams = parse(path, options.queryParams);\r\n        Object.keys(queryParams)\r\n            .filter(function (p) { return _this.isQueryParam(p); })\r\n            .forEach(function (p) { return appendQueryParam(match, p, queryParams[p]); });\r\n        return match;\r\n    };\r\n    Path.prototype.build = function (params, opts) {\r\n        var _this = this;\r\n        if (params === void 0) { params = {}; }\r\n        var options = __assign({ ignoreConstraints: false, ignoreSearch: false, queryParams: {} }, opts);\r\n        var encodedUrlParams = Object.keys(params)\r\n            .filter(function (p) { return !_this.isQueryParam(p); })\r\n            .reduce(function (acc, key) {\r\n            if (!exists(params[key])) {\r\n                return acc;\r\n            }\r\n            var val = params[key];\r\n            var encode = _this.isQueryParam(key) ? identity : encodeURI;\r\n            if (typeof val === 'boolean') {\r\n                acc[key] = val;\r\n            }\r\n            else if (Array.isArray(val)) {\r\n                acc[key] = val.map(encode);\r\n            }\r\n            else {\r\n                acc[key] = encode(val);\r\n            }\r\n            return acc;\r\n        }, {});\r\n        // Check all params are provided (not search parameters which are optional)\r\n        if (this.urlParams.some(function (p) { return !exists(params[p]); })) {\r\n            var missingParameters = this.urlParams.filter(function (p) { return !exists(params[p]); });\r\n            throw new Error(\"Cannot build path: '\" +\r\n                this.path +\r\n                \"' requires missing parameters { \" +\r\n                missingParameters.join(', ') +\r\n                ' }');\r\n        }\r\n        // Check constraints\r\n        if (!options.ignoreConstraints) {\r\n            var constraintsPassed = this.tokens\r\n                .filter(function (t) {\r\n                return /^url-parameter/.test(t.type) && !/-splat$/.test(t.type);\r\n            })\r\n                .every(function (t) {\r\n                return new RegExp('^' + defaultOrConstrained(t.otherVal[0]) + '$').test(encodedUrlParams[t.val]);\r\n            });\r\n            if (!constraintsPassed) {\r\n                throw new Error(\"Some parameters of '\" + this.path + \"' are of invalid format\");\r\n            }\r\n        }\r\n        var base = this.tokens\r\n            .filter(function (t) { return /^query-parameter/.test(t.type) === false; })\r\n            .map(function (t) {\r\n            if (t.type === 'url-parameter-matrix') {\r\n                return \";\" + t.val + \"=\" + encodedUrlParams[t.val[0]];\r\n            }\r\n            return /^url-parameter/.test(t.type)\r\n                ? encodedUrlParams[t.val[0]]\r\n                : t.match;\r\n        })\r\n            .join('');\r\n        if (options.ignoreSearch) {\r\n            return base;\r\n        }\r\n        var searchParams = this.queryParams\r\n            .filter(function (p) { return Object.keys(params).indexOf(p) !== -1; })\r\n            .reduce(function (sparams, paramName) {\r\n            sparams[paramName] = params[paramName];\r\n            return sparams;\r\n        }, {});\r\n        var searchPart = build(searchParams, options.queryParams);\r\n        return searchPart ? base + '?' + searchPart : base;\r\n    };\r\n    Path.prototype.getParams = function (type) {\r\n        var predicate = type instanceof RegExp\r\n            ? function (t) { return type.test(t.type); }\r\n            : function (t) { return t.type === type; };\r\n        return this.tokens.filter(predicate).map(function (t) { return t.val[0]; });\r\n    };\r\n    Path.prototype.urlTest = function (path, source, _a) {\r\n        var _this = this;\r\n        var _b = (_a === void 0 ? {} : _a).caseSensitive, caseSensitive = _b === void 0 ? false : _b;\r\n        var regex = new RegExp('^' + source, caseSensitive ? '' : 'i');\r\n        var match = path.match(regex);\r\n        if (!match) {\r\n            return null;\r\n        }\r\n        else if (!this.urlParams.length) {\r\n            return {};\r\n        }\r\n        // Reduce named params to key-value pairs\r\n        return match\r\n            .slice(1, this.urlParams.length + 1)\r\n            .reduce(function (params, m, i) {\r\n            params[_this.urlParams[i]] = decodeURIComponent(m);\r\n            return params;\r\n        }, {});\r\n    };\r\n    return Path;\r\n}());\n\nexport default Path;\nexport { Path };\n","import { createProjector } from \"maquette\";\nimport Path from \"path-parser\";\nexport function setup(modelProps, setupFn, opts) {\n    const projector = createProjector();\n    const actions = {};\n    const routes = {};\n    const registeredFieldActions = {};\n    /**\n     * Returns a path when given the key of a route that was previously registered.\n     * @param  {string} key\n     * @param  {any} data? A route data object\n     * @returns string\n     */\n    function getRouteLink(key, data) {\n        if (!routes || !routes[key]) {\n            return false;\n        }\n        return routes[key].spec.build(data || {});\n    }\n    /**\n     * Change the browser location to match the path configured in the route with the\n     * provided key. You still need to call an action to udpate state before the UI will re-render.\n     * @param  {string} key\n     * @param  {any} data?\n     */\n    function navToRoute(key, data) {\n        const r = getRouteLink(key, data);\n        if (r) {\n            navToPath(r);\n        }\n    }\n    /**\n     * Update the browser location with the provided raw string path.\n     * @param  {string} path\n     */\n    function navToPath(path) {\n        try {\n            window.history.pushState(modelProps, \"\", path);\n        }\n        catch (error) {\n            window.location.pathname = path;\n        }\n        applyRouteFunction(modelProps);\n    }\n    const modelPresenters = {};\n    function modelPresenter(proposal) {\n        for (const key in modelPresenters) {\n            if (modelPresenters.hasOwnProperty(key)) {\n                const element = modelPresenters[key];\n                element(proposal);\n            }\n        }\n    }\n    let state;\n    function registerAction(key, actionFn) {\n        if (!actions[key]) {\n            actions[key] = actionFn;\n        }\n        return (event) => {\n            actionFn(event, modelPresenter);\n        };\n    }\n    function registerRouteAction(key, path, actionFn) {\n        // console.log(\"register route\", key, path)\n        routes[key] = {\n            calculator: actionFn,\n            spec: new Path(path),\n        };\n    }\n    function registerAcceptor(presenterFn) {\n        const loc = presenterFn.toString().slice(0, 250);\n        if (!modelPresenters[loc]) {\n            modelPresenters[loc] = (proposal) => {\n                presenterFn(proposal, state);\n            };\n        }\n    }\n    function registerView(renderFn) {\n        stateRenderer = () => renderFn(F);\n        state = (newProps) => {\n            modelProps = newProps;\n            projector.scheduleRender();\n        };\n    }\n    function registerField(key, initialValue, validation) {\n        function handler(evt, skipValidation) {\n            modelProps.registeredFieldsValues[key] = evt.target.value;\n            if (evt.target.value.length > 0) {\n                modelProps.registeredFieldsState[key].dirty = true; // latching switch\n            }\n            if (!skipValidation) {\n                validate();\n            }\n        }\n        function validate() {\n            if (validation) {\n                const val = modelProps.registeredFieldsValues[key];\n                const errors = [];\n                if (validation.notEmpty && (!val || val === \"\")) {\n                    errors.push(validation.notEmpty.message);\n                }\n                if (validation.minLength && val.length < validation.minLength.value) {\n                    errors.push(validation.minLength.message);\n                }\n                if (validation.maxLength && val.length > validation.maxLength.value) {\n                    errors.push(validation.maxLength.message);\n                }\n                modelProps.registeredFieldValidationErrors[key] = errors;\n            }\n        }\n        if (modelProps.registeredFieldsValues[key] === undefined) {\n            modelProps.registeredFieldsValues[key] = initialValue || \"\";\n            modelProps.registeredFieldValidationErrors[key] = [];\n            modelProps.registeredFieldsState[key] = { dirty: false };\n        }\n        if (registeredFieldActions[key] === undefined) {\n            registeredFieldActions[key] = handler;\n        }\n        return {\n            clear: () => {\n                modelProps.registeredFieldsValues[key] = initialValue || \"\";\n                modelProps.registeredFieldValidationErrors[key] = [];\n            },\n            handler,\n            isDirty: () => modelProps.registeredFieldsState[key].dirty,\n            isValid: () => !(modelProps.registeredFieldValidationErrors[key].length > 0),\n            key,\n            validate,\n            validationErrors: modelProps.registeredFieldValidationErrors[key],\n            value: modelProps.registeredFieldsValues[key],\n        };\n    }\n    /**\n     * Checks to see if any of the registerd routes are matched and then updates the app state using\n     * the provided transformation function.\n     * @param  {Readonly<T>} props\n     * @returns T\n     */\n    function applyRouteFunction(props) {\n        // console.log(\"routes:\", routes)\n        for (const key in routes) {\n            if (routes.hasOwnProperty(key)) {\n                const entry = routes[key];\n                // console.log(\"testing\", entry)\n                const res = entry.spec.test(window.location.pathname);\n                if (res) {\n                    // console.log(\"found route\", res)\n                    entry.calculator({ key, path: entry.spec.path, data: res }, modelPresenter);\n                }\n            }\n        }\n    }\n    let stateRenderer;\n    const F = {\n        getRouteLink,\n        modelProps,\n        navToPath,\n        navToRoute,\n        registerAcceptor,\n        registerAction,\n        registerField,\n        registerRouteAction,\n        registerView,\n    };\n    window.onpopstate = function (evt) {\n        applyRouteFunction(modelProps);\n    };\n    setupFn(F);\n    return {\n        fretsApp: F,\n        mountTo: (id) => {\n            projector.merge(document.getElementById(id), stateRenderer);\n        },\n        stateRenderer,\n    };\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRnJldHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvRnJldHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFvQixlQUFlLEVBQXVCLE1BQU0sVUFBVSxDQUFDO0FBR2xGLE9BQU8sSUFBSSxNQUFNLGFBQWEsQ0FBQztBQStFL0IsTUFBTSxVQUFVLEtBQUssQ0FDbkIsVUFBYSxFQUFFLE9BQXlDLEVBQUUsSUFBb0I7SUFFOUUsTUFBTSxTQUFTLEdBQUcsZUFBZSxFQUFFLENBQUM7SUFFcEMsTUFBTSxPQUFPLEdBRVQsRUFBRyxDQUFDO0lBRVIsTUFBTSxNQUFNLEdBS1IsRUFBRSxDQUFDO0lBRVAsTUFBTSxzQkFBc0IsR0FFeEIsRUFBRSxDQUFDO0lBRVA7Ozs7O09BS0c7SUFDSCxTQUFTLFlBQVksQ0FBQyxHQUFXLEVBQUUsSUFBVztRQUM1QyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQzNCLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFDRCxPQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBQ0Q7Ozs7O09BS0c7SUFDSCxTQUFTLFVBQVUsQ0FBQyxHQUFXLEVBQUUsSUFBVztRQUMxQyxNQUFNLENBQUMsR0FBRyxZQUFZLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxFQUFFO1lBQ0wsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2Q7SUFDSCxDQUFDO0lBQ0Q7OztPQUdHO0lBQ0gsU0FBUyxTQUFTLENBQUMsSUFBWTtRQUM3QixJQUFJO1lBQ0YsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztTQUNoRDtRQUFDLE9BQU8sS0FBSyxFQUFFO1lB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","export class PropsWithFields {\n    constructor() {\n        this.registeredFieldsValues = {};\n        this.registeredFieldsState = {};\n        this.registeredFieldValidationErrors = {};\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvcHNGaWVsZFJlZ2lzdHJ5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL1Byb3BzRmllbGRSZWdpc3RyeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxNQUFNLE9BQU8sZUFBZTtJQUE1QjtRQUNTLDJCQUFzQixHQUV6QixFQUFFLENBQUM7UUFFQSwwQkFBcUIsR0FFeEIsRUFBRSxDQUFDO1FBRUEsb0NBQStCLEdBRWpDLEVBQUUsQ0FBQztJQUNWLENBQUM7Q0FBQSJ9","export class ActionsWithFields {\n    constructor() {\n        this.registeredFieldActions = {};\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWN0aW9uc0ZpZWxkUmVnaXN0cnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvQWN0aW9uc0ZpZWxkUmVnaXN0cnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxPQUFPLGlCQUFpQjtJQUE5QjtRQUNTLDJCQUFzQixHQUV6QixFQUFFLENBQUM7SUFDVCxDQUFDO0NBQUEifQ=="],"names":["parse","build"],"mappings":"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"}