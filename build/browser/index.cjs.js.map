{"version":3,"file":"index.cjs.js","sources":["../../node_modules/maquette/dist/projection.js","../../node_modules/maquette/dist/dom.js","../../node_modules/maquette/dist/h.js","../../node_modules/maquette/dist/projector.js","../../node_modules/maquette/dist/cache.js","../../node_modules/maquette/dist/mapping.js","../../node_modules/search-params/dist/cjs/index.js","../../node_modules/path-parser/dist/es/path-parser.js","../module/Frets.js","../module/PropsFieldRegistry.js","../module/ActionsFieldRegistry.js"],"sourcesContent":["/* tslint:disable no-http-string */\r\nvar NAMESPACE_W3 = 'http://www.w3.org/';\r\n/* tslint:enable no-http-string */\r\nvar NAMESPACE_SVG = NAMESPACE_W3 + \"2000/svg\";\r\nvar NAMESPACE_XLINK = NAMESPACE_W3 + \"1999/xlink\";\r\nvar emptyArray = [];\r\nexport var extend = function (base, overrides) {\r\n    var result = {};\r\n    Object.keys(base).forEach(function (key) {\r\n        result[key] = base[key];\r\n    });\r\n    if (overrides) {\r\n        Object.keys(overrides).forEach(function (key) {\r\n            result[key] = overrides[key];\r\n        });\r\n    }\r\n    return result;\r\n};\r\nvar same = function (vnode1, vnode2) {\r\n    if (vnode1.vnodeSelector !== vnode2.vnodeSelector) {\r\n        return false;\r\n    }\r\n    if (vnode1.properties && vnode2.properties) {\r\n        if (vnode1.properties.key !== vnode2.properties.key) {\r\n            return false;\r\n        }\r\n        return vnode1.properties.bind === vnode2.properties.bind;\r\n    }\r\n    return !vnode1.properties && !vnode2.properties;\r\n};\r\nvar checkStyleValue = function (styleValue) {\r\n    if (typeof styleValue !== 'string') {\r\n        throw new Error('Style values must be strings');\r\n    }\r\n};\r\nvar findIndexOfChild = function (children, sameAs, start) {\r\n    if (sameAs.vnodeSelector !== '') {\r\n        // Never scan for text-nodes\r\n        for (var i = start; i < children.length; i++) {\r\n            if (same(children[i], sameAs)) {\r\n                return i;\r\n            }\r\n        }\r\n    }\r\n    return -1;\r\n};\r\nvar checkDistinguishable = function (childNodes, indexToCheck, parentVNode, operation) {\r\n    var childNode = childNodes[indexToCheck];\r\n    if (childNode.vnodeSelector === '') {\r\n        return; // Text nodes need not be distinguishable\r\n    }\r\n    var properties = childNode.properties;\r\n    var key = properties ? (properties.key === undefined ? properties.bind : properties.key) : undefined;\r\n    if (!key) { // A key is just assumed to be unique\r\n        for (var i = 0; i < childNodes.length; i++) {\r\n            if (i !== indexToCheck) {\r\n                var node = childNodes[i];\r\n                if (same(node, childNode)) {\r\n                    throw new Error(parentVNode.vnodeSelector + \" had a \" + childNode.vnodeSelector + \" child \" + (operation === 'added' ? operation : 'removed') + \", but there is now more than one. You must add unique key properties to make them distinguishable.\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\nvar nodeAdded = function (vNode) {\r\n    if (vNode.properties) {\r\n        var enterAnimation = vNode.properties.enterAnimation;\r\n        if (enterAnimation) {\r\n            enterAnimation(vNode.domNode, vNode.properties);\r\n        }\r\n    }\r\n};\r\nvar removedNodes = [];\r\nvar requestedIdleCallback = false;\r\nvar visitRemovedNode = function (node) {\r\n    (node.children || []).forEach(visitRemovedNode);\r\n    if (node.properties && node.properties.afterRemoved) {\r\n        node.properties.afterRemoved.apply(node.properties.bind || node.properties, [node.domNode]);\r\n    }\r\n};\r\nvar processPendingNodeRemovals = function () {\r\n    requestedIdleCallback = false;\r\n    removedNodes.forEach(visitRemovedNode);\r\n    removedNodes.length = 0;\r\n};\r\nvar scheduleNodeRemoval = function (vNode) {\r\n    removedNodes.push(vNode);\r\n    if (!requestedIdleCallback) {\r\n        requestedIdleCallback = true;\r\n        if (typeof window !== 'undefined' && 'requestIdleCallback' in window) {\r\n            window.requestIdleCallback(processPendingNodeRemovals, { timeout: 16 });\r\n        }\r\n        else {\r\n            setTimeout(processPendingNodeRemovals, 16);\r\n        }\r\n    }\r\n};\r\nvar nodeToRemove = function (vNode) {\r\n    var domNode = vNode.domNode;\r\n    if (vNode.properties) {\r\n        var exitAnimation = vNode.properties.exitAnimation;\r\n        if (exitAnimation) {\r\n            domNode.style.pointerEvents = 'none';\r\n            var removeDomNode = function () {\r\n                if (domNode.parentNode) {\r\n                    domNode.parentNode.removeChild(domNode);\r\n                    scheduleNodeRemoval(vNode);\r\n                }\r\n            };\r\n            exitAnimation(domNode, removeDomNode, vNode.properties);\r\n            return;\r\n        }\r\n    }\r\n    if (domNode.parentNode) {\r\n        domNode.parentNode.removeChild(domNode);\r\n        scheduleNodeRemoval(vNode);\r\n    }\r\n};\r\nvar setProperties = function (domNode, properties, projectionOptions) {\r\n    if (!properties) {\r\n        return;\r\n    }\r\n    var eventHandlerInterceptor = projectionOptions.eventHandlerInterceptor;\r\n    var propNames = Object.keys(properties);\r\n    var propCount = propNames.length;\r\n    var _loop_1 = function (i) {\r\n        var propName = propNames[i];\r\n        var propValue = properties[propName];\r\n        if (propName === 'className') {\r\n            throw new Error('Property \"className\" is not supported, use \"class\".');\r\n        }\r\n        else if (propName === 'class') {\r\n            toggleClasses(domNode, propValue, true);\r\n        }\r\n        else if (propName === 'classes') {\r\n            // object with string keys and boolean values\r\n            var classNames = Object.keys(propValue);\r\n            var classNameCount = classNames.length;\r\n            for (var j = 0; j < classNameCount; j++) {\r\n                var className = classNames[j];\r\n                if (propValue[className]) {\r\n                    domNode.classList.add(className);\r\n                }\r\n            }\r\n        }\r\n        else if (propName === 'styles') {\r\n            // object with string keys and string (!) values\r\n            var styleNames = Object.keys(propValue);\r\n            var styleCount = styleNames.length;\r\n            for (var j = 0; j < styleCount; j++) {\r\n                var styleName = styleNames[j];\r\n                var styleValue = propValue[styleName];\r\n                if (styleValue) {\r\n                    checkStyleValue(styleValue);\r\n                    projectionOptions.styleApplyer(domNode, styleName, styleValue);\r\n                }\r\n            }\r\n        }\r\n        else if (propName !== 'key' && propValue !== null && propValue !== undefined) {\r\n            var type = typeof propValue;\r\n            if (type === 'function') {\r\n                if (propName.lastIndexOf('on', 0) === 0) { // lastIndexOf(,0)===0 -> startsWith\r\n                    if (eventHandlerInterceptor) {\r\n                        propValue = eventHandlerInterceptor(propName, propValue, domNode, properties); // intercept eventhandlers\r\n                    }\r\n                    if (propName === 'oninput') {\r\n                        /* tslint:disable no-this-keyword no-invalid-this only-arrow-functions no-void-expression */\r\n                        (function () {\r\n                            // record the evt.target.value, because IE and Edge sometimes do a requestAnimationFrame between changing value and running oninput\r\n                            var oldPropValue = propValue;\r\n                            propValue = function (evt) {\r\n                                oldPropValue.apply(this, [evt]);\r\n                                evt.target['oninput-value'] = evt.target.value; // may be HTMLTextAreaElement as well\r\n                            };\r\n                        }());\r\n                        /* tslint:enable */\r\n                    }\r\n                    domNode[propName] = propValue;\r\n                }\r\n            }\r\n            else if (projectionOptions.namespace === NAMESPACE_SVG) {\r\n                if (propName === 'href') {\r\n                    domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\r\n                }\r\n                else {\r\n                    // all SVG attributes are read-only in DOM, so...\r\n                    domNode.setAttribute(propName, propValue);\r\n                }\r\n            }\r\n            else if (type === 'string' && propName !== 'value' && propName !== 'innerHTML') {\r\n                domNode.setAttribute(propName, propValue);\r\n            }\r\n            else {\r\n                domNode[propName] = propValue;\r\n            }\r\n        }\r\n    };\r\n    for (var i = 0; i < propCount; i++) {\r\n        _loop_1(i);\r\n    }\r\n};\r\nvar addChildren = function (domNode, children, projectionOptions) {\r\n    if (!children) {\r\n        return;\r\n    }\r\n    for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\r\n        var child = children_1[_i];\r\n        createDom(child, domNode, undefined, projectionOptions);\r\n    }\r\n};\r\nexport var initPropertiesAndChildren = function (domNode, vnode, projectionOptions) {\r\n    addChildren(domNode, vnode.children, projectionOptions); // children before properties, needed for value property of <select>.\r\n    if (vnode.text) {\r\n        domNode.textContent = vnode.text;\r\n    }\r\n    setProperties(domNode, vnode.properties, projectionOptions);\r\n    if (vnode.properties && vnode.properties.afterCreate) {\r\n        vnode.properties.afterCreate.apply(vnode.properties.bind || vnode.properties, [domNode, projectionOptions, vnode.vnodeSelector, vnode.properties, vnode.children]);\r\n    }\r\n};\r\nexport var createDom = function (vnode, parentNode, insertBefore, projectionOptions) {\r\n    var domNode;\r\n    var start = 0;\r\n    var vnodeSelector = vnode.vnodeSelector;\r\n    var doc = parentNode.ownerDocument;\r\n    if (vnodeSelector === '') {\r\n        domNode = vnode.domNode = doc.createTextNode(vnode.text);\r\n        if (insertBefore !== undefined) {\r\n            parentNode.insertBefore(domNode, insertBefore);\r\n        }\r\n        else {\r\n            parentNode.appendChild(domNode);\r\n        }\r\n    }\r\n    else {\r\n        for (var i = 0; i <= vnodeSelector.length; ++i) {\r\n            var c = vnodeSelector.charAt(i);\r\n            if (i === vnodeSelector.length || c === '.' || c === '#') {\r\n                var type = vnodeSelector.charAt(start - 1);\r\n                var found = vnodeSelector.slice(start, i);\r\n                if (type === '.') {\r\n                    domNode.classList.add(found);\r\n                }\r\n                else if (type === '#') {\r\n                    domNode.id = found;\r\n                }\r\n                else {\r\n                    if (found === 'svg') {\r\n                        projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\r\n                    }\r\n                    if (projectionOptions.namespace !== undefined) {\r\n                        domNode = vnode.domNode = doc.createElementNS(projectionOptions.namespace, found);\r\n                    }\r\n                    else {\r\n                        domNode = vnode.domNode = (vnode.domNode || doc.createElement(found));\r\n                        if (found === 'input' && vnode.properties && vnode.properties.type !== undefined) {\r\n                            // IE8 and older don't support setting input type after the DOM Node has been added to the document\r\n                            domNode.setAttribute('type', vnode.properties.type);\r\n                        }\r\n                    }\r\n                    if (insertBefore !== undefined) {\r\n                        parentNode.insertBefore(domNode, insertBefore);\r\n                    }\r\n                    else if (domNode.parentNode !== parentNode) {\r\n                        parentNode.appendChild(domNode);\r\n                    }\r\n                }\r\n                start = i + 1;\r\n            }\r\n        }\r\n        initPropertiesAndChildren(domNode, vnode, projectionOptions);\r\n    }\r\n};\r\nvar updateDom;\r\n/**\r\n * Adds or removes classes from an Element\r\n * @param domNode the element\r\n * @param classes a string separated list of classes\r\n * @param on true means add classes, false means remove\r\n */\r\nvar toggleClasses = function (domNode, classes, on) {\r\n    if (!classes) {\r\n        return;\r\n    }\r\n    classes.split(' ').forEach(function (c) { return domNode.classList.toggle(c, on); });\r\n};\r\nvar updateProperties = function (domNode, previousProperties, properties, projectionOptions) {\r\n    if (!properties) {\r\n        return;\r\n    }\r\n    var propertiesUpdated = false;\r\n    var propNames = Object.keys(properties);\r\n    var propCount = propNames.length;\r\n    for (var i = 0; i < propCount; i++) {\r\n        var propName = propNames[i];\r\n        // assuming that properties will be nullified instead of missing is by design\r\n        var propValue = properties[propName];\r\n        var previousValue = previousProperties[propName];\r\n        if (propName === 'class') {\r\n            if (previousValue !== propValue) {\r\n                toggleClasses(domNode, previousValue, false);\r\n                toggleClasses(domNode, propValue, true);\r\n            }\r\n        }\r\n        else if (propName === 'classes') {\r\n            var classList = domNode.classList;\r\n            var classNames = Object.keys(propValue);\r\n            var classNameCount = classNames.length;\r\n            for (var j = 0; j < classNameCount; j++) {\r\n                var className = classNames[j];\r\n                var on = !!propValue[className];\r\n                var previousOn = !!previousValue[className];\r\n                if (on === previousOn) {\r\n                    continue;\r\n                }\r\n                propertiesUpdated = true;\r\n                if (on) {\r\n                    classList.add(className);\r\n                }\r\n                else {\r\n                    classList.remove(className);\r\n                }\r\n            }\r\n        }\r\n        else if (propName === 'styles') {\r\n            var styleNames = Object.keys(propValue);\r\n            var styleCount = styleNames.length;\r\n            for (var j = 0; j < styleCount; j++) {\r\n                var styleName = styleNames[j];\r\n                var newStyleValue = propValue[styleName];\r\n                var oldStyleValue = previousValue[styleName];\r\n                if (newStyleValue === oldStyleValue) {\r\n                    continue;\r\n                }\r\n                propertiesUpdated = true;\r\n                if (newStyleValue) {\r\n                    checkStyleValue(newStyleValue);\r\n                    projectionOptions.styleApplyer(domNode, styleName, newStyleValue);\r\n                }\r\n                else {\r\n                    projectionOptions.styleApplyer(domNode, styleName, '');\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!propValue && typeof previousValue === 'string') {\r\n                propValue = '';\r\n            }\r\n            if (propName === 'value') { // value can be manipulated by the user directly and using event.preventDefault() is not an option\r\n                var domValue = domNode[propName];\r\n                if (domValue !== propValue // The 'value' in the DOM tree !== newValue\r\n                    && (domNode['oninput-value']\r\n                        ? domValue === domNode['oninput-value'] // If the last reported value to 'oninput' does not match domValue, do nothing and wait for oninput\r\n                        : propValue !== previousValue // Only update the value if the vdom changed\r\n                    )) {\r\n                    // The edge cases are described in the tests\r\n                    domNode[propName] = propValue; // Reset the value, even if the virtual DOM did not change\r\n                    domNode['oninput-value'] = undefined;\r\n                } // else do not update the domNode, otherwise the cursor position would be changed\r\n                if (propValue !== previousValue) {\r\n                    propertiesUpdated = true;\r\n                }\r\n            }\r\n            else if (propValue !== previousValue) {\r\n                var type = typeof propValue;\r\n                if (type !== 'function' || !projectionOptions.eventHandlerInterceptor) { // Function updates are expected to be handled by the EventHandlerInterceptor\r\n                    if (projectionOptions.namespace === NAMESPACE_SVG) {\r\n                        if (propName === 'href') {\r\n                            domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\r\n                        }\r\n                        else {\r\n                            // all SVG attributes are read-only in DOM, so...\r\n                            domNode.setAttribute(propName, propValue);\r\n                        }\r\n                    }\r\n                    else if (type === 'string' && propName !== 'innerHTML') {\r\n                        if (propName === 'role' && propValue === '') {\r\n                            domNode.removeAttribute(propName);\r\n                        }\r\n                        else {\r\n                            domNode.setAttribute(propName, propValue);\r\n                        }\r\n                    }\r\n                    else if (domNode[propName] !== propValue) { // Comparison is here for side-effects in Edge with scrollLeft and scrollTop\r\n                        domNode[propName] = propValue;\r\n                    }\r\n                    propertiesUpdated = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return propertiesUpdated;\r\n};\r\nvar updateChildren = function (vnode, domNode, oldChildren, newChildren, projectionOptions) {\r\n    if (oldChildren === newChildren) {\r\n        return false;\r\n    }\r\n    oldChildren = oldChildren || emptyArray;\r\n    newChildren = newChildren || emptyArray;\r\n    var oldChildrenLength = oldChildren.length;\r\n    var newChildrenLength = newChildren.length;\r\n    var oldIndex = 0;\r\n    var newIndex = 0;\r\n    var i;\r\n    var textUpdated = false;\r\n    while (newIndex < newChildrenLength) {\r\n        var oldChild = (oldIndex < oldChildrenLength) ? oldChildren[oldIndex] : undefined;\r\n        var newChild = newChildren[newIndex];\r\n        if (oldChild !== undefined && same(oldChild, newChild)) {\r\n            textUpdated = updateDom(oldChild, newChild, projectionOptions) || textUpdated;\r\n            oldIndex++;\r\n        }\r\n        else {\r\n            var findOldIndex = findIndexOfChild(oldChildren, newChild, oldIndex + 1);\r\n            if (findOldIndex >= 0) {\r\n                // Remove preceding missing children\r\n                for (i = oldIndex; i < findOldIndex; i++) {\r\n                    nodeToRemove(oldChildren[i]);\r\n                    checkDistinguishable(oldChildren, i, vnode, 'removed');\r\n                }\r\n                textUpdated = updateDom(oldChildren[findOldIndex], newChild, projectionOptions) || textUpdated;\r\n                oldIndex = findOldIndex + 1;\r\n            }\r\n            else {\r\n                // New child\r\n                createDom(newChild, domNode, (oldIndex < oldChildrenLength) ? oldChildren[oldIndex].domNode : undefined, projectionOptions);\r\n                nodeAdded(newChild);\r\n                checkDistinguishable(newChildren, newIndex, vnode, 'added');\r\n            }\r\n        }\r\n        newIndex++;\r\n    }\r\n    if (oldChildrenLength > oldIndex) {\r\n        // Remove child fragments\r\n        for (i = oldIndex; i < oldChildrenLength; i++) {\r\n            nodeToRemove(oldChildren[i]);\r\n            checkDistinguishable(oldChildren, i, vnode, 'removed');\r\n        }\r\n    }\r\n    return textUpdated;\r\n};\r\nupdateDom = function (previous, vnode, projectionOptions) {\r\n    var domNode = previous.domNode;\r\n    var textUpdated = false;\r\n    if (previous === vnode) {\r\n        return false; // By contract, VNode objects may not be modified anymore after passing them to maquette\r\n    }\r\n    var updated = false;\r\n    if (vnode.vnodeSelector === '') {\r\n        if (vnode.text !== previous.text) {\r\n            var newTextNode = domNode.ownerDocument.createTextNode(vnode.text);\r\n            domNode.parentNode.replaceChild(newTextNode, domNode);\r\n            vnode.domNode = newTextNode;\r\n            textUpdated = true;\r\n            return textUpdated;\r\n        }\r\n        vnode.domNode = domNode;\r\n    }\r\n    else {\r\n        if (vnode.vnodeSelector.lastIndexOf('svg', 0) === 0) { // lastIndexOf(needle,0)===0 means StartsWith\r\n            projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\r\n        }\r\n        if (previous.text !== vnode.text) {\r\n            updated = true;\r\n            if (vnode.text === undefined) {\r\n                domNode.removeChild(domNode.firstChild); // the only textnode presumably\r\n            }\r\n            else {\r\n                domNode.textContent = vnode.text;\r\n            }\r\n        }\r\n        vnode.domNode = domNode;\r\n        updated = updateChildren(vnode, domNode, previous.children, vnode.children, projectionOptions) || updated;\r\n        updated = updateProperties(domNode, previous.properties, vnode.properties, projectionOptions) || updated;\r\n        if (vnode.properties && vnode.properties.afterUpdate) {\r\n            vnode.properties.afterUpdate.apply(vnode.properties.bind || vnode.properties, [domNode, projectionOptions, vnode.vnodeSelector, vnode.properties, vnode.children]);\r\n        }\r\n    }\r\n    if (updated && vnode.properties && vnode.properties.updateAnimation) {\r\n        vnode.properties.updateAnimation(domNode, vnode.properties, previous.properties);\r\n    }\r\n    return textUpdated;\r\n};\r\nexport var createProjection = function (vnode, projectionOptions) {\r\n    return {\r\n        getLastRender: function () { return vnode; },\r\n        update: function (updatedVnode) {\r\n            if (vnode.vnodeSelector !== updatedVnode.vnodeSelector) {\r\n                throw new Error('The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)');\r\n            }\r\n            var previousVNode = vnode;\r\n            vnode = updatedVnode;\r\n            updateDom(previousVNode, updatedVnode, projectionOptions);\r\n        },\r\n        domNode: vnode.domNode\r\n    };\r\n};\r\n//# sourceMappingURL=projection.js.map","import { createDom, createProjection, extend, initPropertiesAndChildren } from './projection';\r\nvar DEFAULT_PROJECTION_OPTIONS = {\r\n    namespace: undefined,\r\n    performanceLogger: function () { return undefined; },\r\n    eventHandlerInterceptor: undefined,\r\n    styleApplyer: function (domNode, styleName, value) {\r\n        // Provides a hook to add vendor prefixes for browsers that still need it.\r\n        domNode.style[styleName] = value;\r\n    }\r\n};\r\nexport var applyDefaultProjectionOptions = function (projectorOptions) {\r\n    return extend(DEFAULT_PROJECTION_OPTIONS, projectorOptions);\r\n};\r\nexport var dom = {\r\n    /**\r\n     * Creates a real DOM tree from `vnode`. The [[Projection]] object returned will contain the resulting DOM Node in\r\n     * its [[Projection.domNode|domNode]] property.\r\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n     * objects may only be rendered once.\r\n     * @param projectionOptions - Options to be used to create and update the projection.\r\n     * @returns The [[Projection]] which also contains the DOM Node that was created.\r\n     */\r\n    create: function (vnode, projectionOptions) {\r\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n        createDom(vnode, document.createElement('div'), undefined, projectionOptions);\r\n        return createProjection(vnode, projectionOptions);\r\n    },\r\n    /**\r\n     * Appends a new child node to the DOM which is generated from a [[VNode]].\r\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n     * @param parentNode - The parent node for the new child node.\r\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n     * objects may only be rendered once.\r\n     * @param projectionOptions - Options to be used to create and update the [[Projection]].\r\n     * @returns The [[Projection]] that was created.\r\n     */\r\n    append: function (parentNode, vnode, projectionOptions) {\r\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n        createDom(vnode, parentNode, undefined, projectionOptions);\r\n        return createProjection(vnode, projectionOptions);\r\n    },\r\n    /**\r\n     * Inserts a new DOM node which is generated from a [[VNode]].\r\n     * This is a low-level method. Users wil typically use a [[Projector]] instead.\r\n     * @param beforeNode - The node that the DOM Node is inserted before.\r\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function.\r\n     * NOTE: [[VNode]] objects may only be rendered once.\r\n     * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\r\n     * @returns The [[Projection]] that was created.\r\n     */\r\n    insertBefore: function (beforeNode, vnode, projectionOptions) {\r\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n        createDom(vnode, beforeNode.parentNode, beforeNode, projectionOptions);\r\n        return createProjection(vnode, projectionOptions);\r\n    },\r\n    /**\r\n     * Merges a new DOM node which is generated from a [[VNode]] with an existing DOM Node.\r\n     * This means that the virtual DOM and the real DOM will have one overlapping element.\r\n     * Therefore the selector for the root [[VNode]] will be ignored, but its properties and children will be applied to the Element provided.\r\n     * This is a low-level method. Users wil typically use a [[Projector]] instead.\r\n     * @param element - The existing element to adopt as the root of the new virtual DOM. Existing attributes and child nodes are preserved.\r\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]] objects\r\n     * may only be rendered once.\r\n     * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\r\n     * @returns The [[Projection]] that was created.\r\n     */\r\n    merge: function (element, vnode, projectionOptions) {\r\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n        vnode.domNode = element;\r\n        initPropertiesAndChildren(element, vnode, projectionOptions);\r\n        return createProjection(vnode, projectionOptions);\r\n    },\r\n    /**\r\n     * Replaces an existing DOM node with a node generated from a [[VNode]].\r\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n     * @param element - The node for the [[VNode]] to replace.\r\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n     * objects may only be rendered once.\r\n     * @param projectionOptions - Options to be used to create and update the [[Projection]].\r\n     * @returns The [[Projection]] that was created.\r\n     */\r\n    replace: function (element, vnode, projectionOptions) {\r\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n        createDom(vnode, element.parentNode, element, projectionOptions);\r\n        element.parentNode.removeChild(element);\r\n        return createProjection(vnode, projectionOptions);\r\n    }\r\n};\r\n//# sourceMappingURL=dom.js.map","/* tslint:disable function-name */\r\nvar toTextVNode = function (data) {\r\n    return {\r\n        vnodeSelector: '',\r\n        properties: undefined,\r\n        children: undefined,\r\n        text: data.toString(),\r\n        domNode: null\r\n    };\r\n};\r\nvar appendChildren = function (parentSelector, insertions, main) {\r\n    for (var i = 0, length_1 = insertions.length; i < length_1; i++) {\r\n        var item = insertions[i];\r\n        if (Array.isArray(item)) {\r\n            appendChildren(parentSelector, item, main);\r\n        }\r\n        else {\r\n            if (item !== null && item !== undefined && item !== false) {\r\n                if (typeof item === 'string') {\r\n                    item = toTextVNode(item);\r\n                }\r\n                main.push(item);\r\n            }\r\n        }\r\n    }\r\n};\r\nexport function h(selector, properties, children) {\r\n    if (Array.isArray(properties)) {\r\n        children = properties;\r\n        properties = undefined;\r\n    }\r\n    else if ((properties && (typeof properties === 'string' || properties.hasOwnProperty('vnodeSelector'))) ||\r\n        (children && (typeof children === 'string' || children.hasOwnProperty('vnodeSelector')))) {\r\n        throw new Error('h called with invalid arguments');\r\n    }\r\n    var text;\r\n    var flattenedChildren;\r\n    // Recognize a common special case where there is only a single text node\r\n    if (children && children.length === 1 && typeof children[0] === 'string') {\r\n        text = children[0];\r\n    }\r\n    else if (children) {\r\n        flattenedChildren = [];\r\n        appendChildren(selector, children, flattenedChildren);\r\n        if (flattenedChildren.length === 0) {\r\n            flattenedChildren = undefined;\r\n        }\r\n    }\r\n    return {\r\n        vnodeSelector: selector,\r\n        properties: properties,\r\n        children: flattenedChildren,\r\n        text: (text === '') ? undefined : text,\r\n        domNode: null\r\n    };\r\n}\r\n//# sourceMappingURL=h.js.map","import { applyDefaultProjectionOptions, dom } from './dom';\r\nvar createParentNodePath = function (node, rootNode) {\r\n    var parentNodePath = [];\r\n    while (node !== rootNode) {\r\n        parentNodePath.push(node);\r\n        node = node.parentNode;\r\n    }\r\n    return parentNodePath;\r\n};\r\nvar find;\r\nif (Array.prototype.find) {\r\n    find = function (items, predicate) { return items.find(predicate); };\r\n}\r\nelse {\r\n    find = function (items, predicate) { return items.filter(predicate)[0]; };\r\n}\r\nvar findVNodeByParentNodePath = function (vnode, parentNodePath) {\r\n    var result = vnode;\r\n    parentNodePath.forEach(function (node) {\r\n        result = (result && result.children) ? find(result.children, function (child) { return child.domNode === node; }) : undefined;\r\n    });\r\n    return result;\r\n};\r\nvar createEventHandlerInterceptor = function (projector, getProjection, performanceLogger) {\r\n    var modifiedEventHandler = function (evt) {\r\n        performanceLogger('domEvent', evt);\r\n        var projection = getProjection();\r\n        var parentNodePath = createParentNodePath(evt.currentTarget, projection.domNode);\r\n        parentNodePath.reverse();\r\n        var matchingVNode = findVNodeByParentNodePath(projection.getLastRender(), parentNodePath);\r\n        projector.scheduleRender();\r\n        var result;\r\n        if (matchingVNode) {\r\n            /* tslint:disable no-invalid-this */\r\n            result = matchingVNode.properties[\"on\" + evt.type].apply(matchingVNode.properties.bind || this, arguments);\r\n            /* tslint:enable no-invalid-this */\r\n        }\r\n        performanceLogger('domEventProcessed', evt);\r\n        return result;\r\n    };\r\n    return function (propertyName, eventHandler, domNode, properties) { return modifiedEventHandler; };\r\n};\r\n/**\r\n * Creates a [[Projector]] instance using the provided projectionOptions.\r\n *\r\n * For more information, see [[Projector]].\r\n *\r\n * @param projectorOptions   Options that influence how the DOM is rendered and updated.\r\n */\r\nexport var createProjector = function (projectorOptions) {\r\n    var projector;\r\n    var projectionOptions = applyDefaultProjectionOptions(projectorOptions);\r\n    var performanceLogger = projectionOptions.performanceLogger;\r\n    var renderCompleted = true;\r\n    var scheduled;\r\n    var stopped = false;\r\n    var projections = [];\r\n    var renderFunctions = []; // matches the projections array\r\n    var addProjection = function (\r\n    /* one of: dom.append, dom.insertBefore, dom.replace, dom.merge */\r\n    domFunction, \r\n    /* the parameter of the domFunction */\r\n    node, renderFunction) {\r\n        var projection;\r\n        var getProjection = function () { return projection; };\r\n        projectionOptions.eventHandlerInterceptor = createEventHandlerInterceptor(projector, getProjection, performanceLogger);\r\n        projection = domFunction(node, renderFunction(), projectionOptions);\r\n        projections.push(projection);\r\n        renderFunctions.push(renderFunction);\r\n    };\r\n    var doRender = function () {\r\n        scheduled = undefined;\r\n        if (!renderCompleted) {\r\n            return; // The last render threw an error, it should have been logged in the browser console.\r\n        }\r\n        renderCompleted = false;\r\n        performanceLogger('renderStart', undefined);\r\n        for (var i = 0; i < projections.length; i++) {\r\n            var updatedVnode = renderFunctions[i]();\r\n            performanceLogger('rendered', undefined);\r\n            projections[i].update(updatedVnode);\r\n            performanceLogger('patched', undefined);\r\n        }\r\n        performanceLogger('renderDone', undefined);\r\n        renderCompleted = true;\r\n    };\r\n    projector = {\r\n        renderNow: doRender,\r\n        scheduleRender: function () {\r\n            if (!scheduled && !stopped) {\r\n                scheduled = requestAnimationFrame(doRender);\r\n            }\r\n        },\r\n        stop: function () {\r\n            if (scheduled) {\r\n                cancelAnimationFrame(scheduled);\r\n                scheduled = undefined;\r\n            }\r\n            stopped = true;\r\n        },\r\n        resume: function () {\r\n            stopped = false;\r\n            renderCompleted = true;\r\n            projector.scheduleRender();\r\n        },\r\n        append: function (parentNode, renderFunction) {\r\n            addProjection(dom.append, parentNode, renderFunction);\r\n        },\r\n        insertBefore: function (beforeNode, renderFunction) {\r\n            addProjection(dom.insertBefore, beforeNode, renderFunction);\r\n        },\r\n        merge: function (domNode, renderFunction) {\r\n            addProjection(dom.merge, domNode, renderFunction);\r\n        },\r\n        replace: function (domNode, renderFunction) {\r\n            addProjection(dom.replace, domNode, renderFunction);\r\n        },\r\n        detach: function (renderFunction) {\r\n            for (var i = 0; i < renderFunctions.length; i++) {\r\n                if (renderFunctions[i] === renderFunction) {\r\n                    renderFunctions.splice(i, 1);\r\n                    return projections.splice(i, 1)[0];\r\n                }\r\n            }\r\n            throw new Error('renderFunction was not found');\r\n        }\r\n    };\r\n    return projector;\r\n};\r\n//# sourceMappingURL=projector.js.map","/**\r\n * Creates a [[CalculationCache]] object, useful for caching [[VNode]] trees.\r\n * In practice, caching of [[VNode]] trees is not needed, because achieving 60 frames per second is almost never a problem.\r\n * For more information, see [[CalculationCache]].\r\n *\r\n * @param <Result> The type of the value that is cached.\r\n */\r\nexport var createCache = function () {\r\n    var cachedInputs;\r\n    var cachedOutcome;\r\n    return {\r\n        invalidate: function () {\r\n            cachedOutcome = undefined;\r\n            cachedInputs = undefined;\r\n        },\r\n        result: function (inputs, calculation) {\r\n            if (cachedInputs) {\r\n                for (var i = 0; i < inputs.length; i++) {\r\n                    if (cachedInputs[i] !== inputs[i]) {\r\n                        cachedOutcome = undefined;\r\n                    }\r\n                }\r\n            }\r\n            if (!cachedOutcome) {\r\n                cachedOutcome = calculation();\r\n                cachedInputs = inputs;\r\n            }\r\n            return cachedOutcome;\r\n        }\r\n    };\r\n};\r\n//# sourceMappingURL=cache.js.map","/**\r\n * Creates a {@link Mapping} instance that keeps an array of result objects synchronized with an array of source objects.\r\n * See {@link http://maquettejs.org/docs/arrays.html|Working with arrays}.\r\n *\r\n * @param <Source>       The type of source items. A database-record for instance.\r\n * @param <Target>       The type of target items. A [[MaquetteComponent]] for instance.\r\n * @param getSourceKey   `function(source)` that must return a key to identify each source object. The result must either be a string or a number.\r\n * @param createResult   `function(source, index)` that must create a new result object from a given source. This function is identical\r\n *                       to the `callback` argument in `Array.map(callback)`.\r\n * @param updateResult   `function(source, target, index)` that updates a result to an updated source.\r\n */\r\nexport var createMapping = function (getSourceKey, createResult, updateResult) {\r\n    var keys = [];\r\n    var results = [];\r\n    return {\r\n        results: results,\r\n        map: function (newSources) {\r\n            var newKeys = newSources.map(getSourceKey);\r\n            var oldTargets = results.slice();\r\n            var oldIndex = 0;\r\n            for (var i = 0; i < newSources.length; i++) {\r\n                var source = newSources[i];\r\n                var sourceKey = newKeys[i];\r\n                if (sourceKey === keys[oldIndex]) {\r\n                    results[i] = oldTargets[oldIndex];\r\n                    updateResult(source, oldTargets[oldIndex], i);\r\n                    oldIndex++;\r\n                }\r\n                else {\r\n                    var found = false;\r\n                    for (var j = 1; j < keys.length + 1; j++) {\r\n                        var searchIndex = (oldIndex + j) % keys.length;\r\n                        if (keys[searchIndex] === sourceKey) {\r\n                            results[i] = oldTargets[searchIndex];\r\n                            updateResult(newSources[i], oldTargets[searchIndex], i);\r\n                            oldIndex = searchIndex + 1;\r\n                            found = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!found) {\r\n                        results[i] = createResult(source, i);\r\n                    }\r\n                }\r\n            }\r\n            results.length = newSources.length;\r\n            keys = newKeys;\r\n        }\r\n    };\r\n};\r\n//# sourceMappingURL=mapping.js.map","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar makeOptions = function (opts) {\r\n    if (opts === void 0) { opts = {}; }\r\n    return ({\r\n        arrayFormat: opts.arrayFormat || 'none',\r\n        booleanFormat: opts.booleanFormat || 'none',\r\n        nullFormat: opts.nullFormat || 'default'\r\n    });\r\n};\r\nvar encodeValue = function (value) { return encodeURIComponent(value); };\r\nvar decodeValue = function (value) { return decodeURIComponent(value); };\r\nvar encodeBoolean = function (name, value, opts) {\r\n    if (opts.booleanFormat === 'empty-true' && value) {\r\n        return name;\r\n    }\r\n    var encodedValue;\r\n    if (opts.booleanFormat === 'unicode') {\r\n        encodedValue = value ? '✓' : '✗';\r\n    }\r\n    else {\r\n        encodedValue = value.toString();\r\n    }\r\n    return name + \"=\" + encodedValue;\r\n};\r\nvar encodeNull = function (name, opts) {\r\n    if (opts.nullFormat === 'hidden') {\r\n        return '';\r\n    }\r\n    if (opts.nullFormat === 'string') {\r\n        return name + \"=null\";\r\n    }\r\n    return name;\r\n};\r\nvar getNameEncoder = function (opts) {\r\n    if (opts.arrayFormat === 'index') {\r\n        return function (name, index) { return name + \"[\" + index + \"]\"; };\r\n    }\r\n    if (opts.arrayFormat === 'brackets') {\r\n        return function (name) { return name + \"[]\"; };\r\n    }\r\n    return function (name) { return name; };\r\n};\r\nvar encodeArray = function (name, arr, opts) {\r\n    var encodeName = getNameEncoder(opts);\r\n    return arr\r\n        .map(function (val, index) { return encodeName(name, index) + \"=\" + encodeValue(val); })\r\n        .join('&');\r\n};\r\nvar encode = function (name, value, opts) {\r\n    if (value === null) {\r\n        return encodeNull(name, opts);\r\n    }\r\n    if (typeof value === 'boolean') {\r\n        return encodeBoolean(name, value, opts);\r\n    }\r\n    if (Array.isArray(value)) {\r\n        return encodeArray(name, value, opts);\r\n    }\r\n    return name + \"=\" + encodeValue(value);\r\n};\r\nvar decode = function (value, opts) {\r\n    if (value === undefined) {\r\n        return opts.booleanFormat === 'empty-true' ? true : null;\r\n    }\r\n    if (opts.booleanFormat === 'string') {\r\n        if (value === 'true') {\r\n            return true;\r\n        }\r\n        if (value === 'false') {\r\n            return false;\r\n        }\r\n    }\r\n    else if (opts.booleanFormat === 'unicode') {\r\n        if (decodeValue(value) === '✓') {\r\n            return true;\r\n        }\r\n        if (decodeValue(value) === '✗') {\r\n            return false;\r\n        }\r\n    }\r\n    else if (opts.nullFormat === 'string') {\r\n        if (value === 'null') {\r\n            return null;\r\n        }\r\n    }\r\n    return decodeValue(value);\r\n};\n\nvar getSearch = function (path) {\r\n    var pos = path.indexOf('?');\r\n    if (pos === -1) {\r\n        return path;\r\n    }\r\n    return path.slice(pos + 1);\r\n};\r\nvar isSerialisable = function (val) { return val !== undefined; };\r\nvar parseName = function (name) {\r\n    var bracketPosition = name.indexOf('[');\r\n    var hasBrackets = bracketPosition !== -1;\r\n    return {\r\n        hasBrackets: hasBrackets,\r\n        name: hasBrackets ? name.slice(0, bracketPosition) : name\r\n    };\r\n};\n\n/**\r\n * Parse a querystring and return an object of parameters\r\n */\r\nvar parse = function (path, opts) {\r\n    var options = makeOptions(opts);\r\n    return getSearch(path)\r\n        .split('&')\r\n        .reduce(function (params, param) {\r\n        var _a = param.split('='), rawName = _a[0], value = _a[1];\r\n        var _b = parseName(rawName), hasBrackets = _b.hasBrackets, name = _b.name;\r\n        var currentValue = params[name];\r\n        var decodedValue = decode(value, options);\r\n        if (currentValue === undefined) {\r\n            params[name] = hasBrackets ? [decodedValue] : decodedValue;\r\n        }\r\n        else {\r\n            params[name] = [].concat(currentValue, decodedValue);\r\n        }\r\n        return params;\r\n    }, {});\r\n};\r\n/**\r\n * Build a querystring from an object of parameters\r\n */\r\nvar build = function (params, opts) {\r\n    var options = makeOptions(opts);\r\n    return Object.keys(params)\r\n        .filter(function (paramName) { return isSerialisable(params[paramName]); })\r\n        .map(function (paramName) { return encode(paramName, params[paramName], options); })\r\n        .filter(Boolean)\r\n        .join('&');\r\n};\r\n/**\r\n * Remove a list of parameters from a querystring\r\n */\r\nvar omit = function (path, paramsToOmit, opts) {\r\n    var options = makeOptions(opts);\r\n    var searchPart = getSearch(path);\r\n    if (searchPart === '') {\r\n        return {\r\n            querystring: '',\r\n            removedParams: {}\r\n        };\r\n    }\r\n    var _a = path.split('&').reduce(function (_a, chunk) {\r\n        var left = _a[0], right = _a[1];\r\n        var rawName = chunk.split('=')[0];\r\n        var name = parseName(rawName).name;\r\n        return paramsToOmit.indexOf(name) === -1\r\n            ? [left.concat(chunk), right]\r\n            : [left, right.concat(chunk)];\r\n    }, [[], []]), kept = _a[0], removed = _a[1];\r\n    return {\r\n        querystring: kept.join('&'),\r\n        removedParams: parse(removed.join('&'), options)\r\n    };\r\n};\r\n/**\r\n * Remove a list of parameters from a querystring\r\n */\r\nvar keep = function (path, paramsToKeep, opts) {\r\n    var options = makeOptions(opts);\r\n    var searchPart = getSearch(path);\r\n    if (searchPart === '') {\r\n        return {\r\n            keptParams: {},\r\n            querystring: ''\r\n        };\r\n    }\r\n    var _a = path.split('&').reduce(function (_a, chunk) {\r\n        var left = _a[0], right = _a[1];\r\n        var rawName = chunk.split('=')[0];\r\n        var name = parseName(rawName).name;\r\n        return paramsToKeep.indexOf(name) >= 0\r\n            ? [left.concat(chunk), right]\r\n            : [left, right.concat(chunk)];\r\n    }, [[], []]), kept = _a[0], removed = _a[1];\r\n    return {\r\n        keptParams: parse(kept.join('&'), options),\r\n        querystring: kept.join('&')\r\n    };\r\n};\n\nexports.parse = parse;\nexports.build = build;\nexports.omit = omit;\nexports.keep = keep;\n","import { build, parse } from 'search-params';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n};\n\nvar defaultOrConstrained = function (match) {\r\n    return '(' +\r\n        (match ? match.replace(/(^<|>$)/g, '') : \"[a-zA-Z0-9-_.~%':|=+\\\\*@]+\") +\r\n        ')';\r\n};\r\nvar rules = [\r\n    {\r\n        name: 'url-parameter',\r\n        pattern: /^:([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,\r\n        regex: function (match) {\r\n            return new RegExp(defaultOrConstrained(match[2]));\r\n        }\r\n    },\r\n    {\r\n        name: 'url-parameter-splat',\r\n        pattern: /^\\*([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/,\r\n        regex: /([^?]*)/\r\n    },\r\n    {\r\n        name: 'url-parameter-matrix',\r\n        pattern: /^;([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,\r\n        regex: function (match) {\r\n            return new RegExp(';' + match[1] + '=' + defaultOrConstrained(match[2]));\r\n        }\r\n    },\r\n    {\r\n        name: 'query-parameter',\r\n        pattern: /^(?:\\?|&)(?::)?([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/\r\n    },\r\n    {\r\n        name: 'delimiter',\r\n        pattern: /^(\\/|\\?)/,\r\n        regex: function (match) { return new RegExp('\\\\' + match[0]); }\r\n    },\r\n    {\r\n        name: 'sub-delimiter',\r\n        pattern: /^(!|&|-|_|\\.|;)/,\r\n        regex: function (match) { return new RegExp(match[0]); }\r\n    },\r\n    {\r\n        name: 'fragment',\r\n        pattern: /^([0-9a-zA-Z]+)/,\r\n        regex: function (match) { return new RegExp(match[0]); }\r\n    }\r\n];\n\nvar tokenise = function (str, tokens) {\r\n    if (tokens === void 0) { tokens = []; }\r\n    // Look for a matching rule\r\n    var matched = rules.some(function (rule) {\r\n        var match = str.match(rule.pattern);\r\n        if (!match) {\r\n            return false;\r\n        }\r\n        tokens.push({\r\n            type: rule.name,\r\n            match: match[0],\r\n            val: match.slice(1, 2),\r\n            otherVal: match.slice(2),\r\n            regex: rule.regex instanceof Function ? rule.regex(match) : rule.regex\r\n        });\r\n        if (match[0].length < str.length) {\r\n            tokens = tokenise(str.substr(match[0].length), tokens);\r\n        }\r\n        return true;\r\n    });\r\n    // If no rules matched, throw an error (possible malformed path)\r\n    if (!matched) {\r\n        throw new Error(\"Could not parse path '\" + str + \"'\");\r\n    }\r\n    return tokens;\r\n};\n\nvar identity = function (_) { return _; };\r\nvar exists = function (val) { return val !== undefined && val !== null; };\r\nvar optTrailingSlash = function (source, strictTrailingSlash) {\r\n    if (strictTrailingSlash) {\r\n        return source;\r\n    }\r\n    if (source === '\\\\/') {\r\n        return source;\r\n    }\r\n    return source.replace(/\\\\\\/$/, '') + '(?:\\\\/)?';\r\n};\r\nvar upToDelimiter = function (source, delimiter) {\r\n    if (!delimiter) {\r\n        return source;\r\n    }\r\n    return /(\\/)$/.test(source) ? source : source + '(\\\\/|\\\\?|\\\\.|;|$)';\r\n};\r\nvar appendQueryParam = function (params, param, val) {\r\n    if (val === void 0) { val = ''; }\r\n    var existingVal = params[param];\r\n    if (existingVal === undefined) {\r\n        params[param] = val;\r\n    }\r\n    else {\r\n        params[param] = Array.isArray(existingVal)\r\n            ? existingVal.concat(val)\r\n            : [existingVal, val];\r\n    }\r\n    return params;\r\n};\r\nvar Path = /** @class */ (function () {\r\n    function Path(path) {\r\n        if (!path) {\r\n            throw new Error('Missing path in Path constructor');\r\n        }\r\n        this.path = path;\r\n        this.tokens = tokenise(path);\r\n        this.hasUrlParams =\r\n            this.tokens.filter(function (t) { return /^url-parameter/.test(t.type); }).length > 0;\r\n        this.hasSpatParam =\r\n            this.tokens.filter(function (t) { return /splat$/.test(t.type); }).length > 0;\r\n        this.hasMatrixParams =\r\n            this.tokens.filter(function (t) { return /matrix$/.test(t.type); }).length > 0;\r\n        this.hasQueryParams =\r\n            this.tokens.filter(function (t) { return /^query-parameter/.test(t.type); }).length > 0;\r\n        // Extract named parameters from tokens\r\n        this.spatParams = this.getParams('url-parameter-splat');\r\n        this.urlParams = this.getParams(/^url-parameter/);\r\n        // Query params\r\n        this.queryParams = this.getParams('query-parameter');\r\n        // All params\r\n        this.params = this.urlParams.concat(this.queryParams);\r\n        // Check if hasQueryParams\r\n        // Regular expressions for url part only (full and partial match)\r\n        this.source = this.tokens\r\n            .filter(function (t) { return t.regex !== undefined; })\r\n            .map(function (r) { return r.regex.source; })\r\n            .join('');\r\n    }\r\n    Path.createPath = function (path) {\r\n        return new Path(path);\r\n    };\r\n    Path.prototype.isQueryParam = function (name) {\r\n        return this.queryParams.indexOf(name) !== -1;\r\n    };\r\n    Path.prototype.test = function (path, opts) {\r\n        var _this = this;\r\n        var options = __assign({ strictTrailingSlash: false, queryParams: {} }, opts);\r\n        // trailingSlash: falsy => non optional, truthy => optional\r\n        var source = optTrailingSlash(this.source, options.strictTrailingSlash);\r\n        // Check if exact match\r\n        var match = this.urlTest(path, source + (this.hasQueryParams ? '(\\\\?.*$|$)' : '$'), opts);\r\n        // If no match, or no query params, no need to go further\r\n        if (!match || !this.hasQueryParams) {\r\n            return match;\r\n        }\r\n        // Extract query params\r\n        var queryParams = parse(path, options.queryParams);\r\n        var unexpectedQueryParams = Object.keys(queryParams).filter(function (p) { return !_this.isQueryParam(p); });\r\n        if (unexpectedQueryParams.length === 0) {\r\n            // Extend url match\r\n            Object.keys(queryParams).forEach(function (p) { return (match[p] = queryParams[p]); });\r\n            return match;\r\n        }\r\n        return null;\r\n    };\r\n    Path.prototype.partialTest = function (path, opts) {\r\n        var _this = this;\r\n        var options = __assign({ delimited: true, queryParams: {} }, opts);\r\n        // Check if partial match (start of given path matches regex)\r\n        // trailingSlash: falsy => non optional, truthy => optional\r\n        var source = upToDelimiter(this.source, options.delimited);\r\n        var match = this.urlTest(path, source, options);\r\n        if (!match) {\r\n            return match;\r\n        }\r\n        if (!this.hasQueryParams) {\r\n            return match;\r\n        }\r\n        var queryParams = parse(path, options.queryParams);\r\n        Object.keys(queryParams)\r\n            .filter(function (p) { return _this.isQueryParam(p); })\r\n            .forEach(function (p) { return appendQueryParam(match, p, queryParams[p]); });\r\n        return match;\r\n    };\r\n    Path.prototype.build = function (params, opts) {\r\n        var _this = this;\r\n        if (params === void 0) { params = {}; }\r\n        var options = __assign({ ignoreConstraints: false, ignoreSearch: false, queryParams: {} }, opts);\r\n        var encodedUrlParams = Object.keys(params)\r\n            .filter(function (p) { return !_this.isQueryParam(p); })\r\n            .reduce(function (acc, key) {\r\n            if (!exists(params[key])) {\r\n                return acc;\r\n            }\r\n            var val = params[key];\r\n            var encode = _this.isQueryParam(key) ? identity : encodeURI;\r\n            if (typeof val === 'boolean') {\r\n                acc[key] = val;\r\n            }\r\n            else if (Array.isArray(val)) {\r\n                acc[key] = val.map(encode);\r\n            }\r\n            else {\r\n                acc[key] = encode(val);\r\n            }\r\n            return acc;\r\n        }, {});\r\n        // Check all params are provided (not search parameters which are optional)\r\n        if (this.urlParams.some(function (p) { return !exists(params[p]); })) {\r\n            var missingParameters = this.urlParams.filter(function (p) { return !exists(params[p]); });\r\n            throw new Error(\"Cannot build path: '\" +\r\n                this.path +\r\n                \"' requires missing parameters { \" +\r\n                missingParameters.join(', ') +\r\n                ' }');\r\n        }\r\n        // Check constraints\r\n        if (!options.ignoreConstraints) {\r\n            var constraintsPassed = this.tokens\r\n                .filter(function (t) {\r\n                return /^url-parameter/.test(t.type) && !/-splat$/.test(t.type);\r\n            })\r\n                .every(function (t) {\r\n                return new RegExp('^' + defaultOrConstrained(t.otherVal[0]) + '$').test(encodedUrlParams[t.val]);\r\n            });\r\n            if (!constraintsPassed) {\r\n                throw new Error(\"Some parameters of '\" + this.path + \"' are of invalid format\");\r\n            }\r\n        }\r\n        var base = this.tokens\r\n            .filter(function (t) { return /^query-parameter/.test(t.type) === false; })\r\n            .map(function (t) {\r\n            if (t.type === 'url-parameter-matrix') {\r\n                return \";\" + t.val + \"=\" + encodedUrlParams[t.val[0]];\r\n            }\r\n            return /^url-parameter/.test(t.type)\r\n                ? encodedUrlParams[t.val[0]]\r\n                : t.match;\r\n        })\r\n            .join('');\r\n        if (options.ignoreSearch) {\r\n            return base;\r\n        }\r\n        var searchParams = this.queryParams\r\n            .filter(function (p) { return Object.keys(params).indexOf(p) !== -1; })\r\n            .reduce(function (sparams, paramName) {\r\n            sparams[paramName] = params[paramName];\r\n            return sparams;\r\n        }, {});\r\n        var searchPart = build(searchParams, options.queryParams);\r\n        return searchPart ? base + '?' + searchPart : base;\r\n    };\r\n    Path.prototype.getParams = function (type) {\r\n        var predicate = type instanceof RegExp\r\n            ? function (t) { return type.test(t.type); }\r\n            : function (t) { return t.type === type; };\r\n        return this.tokens.filter(predicate).map(function (t) { return t.val[0]; });\r\n    };\r\n    Path.prototype.urlTest = function (path, source, _a) {\r\n        var _this = this;\r\n        var _b = (_a === void 0 ? {} : _a).caseSensitive, caseSensitive = _b === void 0 ? false : _b;\r\n        var regex = new RegExp('^' + source, caseSensitive ? '' : 'i');\r\n        var match = path.match(regex);\r\n        if (!match) {\r\n            return null;\r\n        }\r\n        else if (!this.urlParams.length) {\r\n            return {};\r\n        }\r\n        // Reduce named params to key-value pairs\r\n        return match\r\n            .slice(1, this.urlParams.length + 1)\r\n            .reduce(function (params, m, i) {\r\n            params[_this.urlParams[i]] = decodeURIComponent(m);\r\n            return params;\r\n        }, {});\r\n    };\r\n    return Path;\r\n}());\n\nexport default Path;\nexport { Path };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createProjector, h } from \"maquette\";\nimport * as maquette from \"maquette\";\nimport Path from \"path-parser\";\n/**\n * FRETS class is the main way to instantiate a new application and hang your models, actions, and state off it\n * @template T, U\n */\nvar FRETS = /** @class */ (function () {\n    /**\n     * @param  {T} modelProps A required initial instance of the application Props(Model)\n     * @param  {U} actions A required instance of an actions class\n     *  (which will be registered later with registerAction `App.actions.X = App.registerAction(fn)`)\n     */\n    function FRETS(modelProps, actions) {\n        var _this = this;\n        this.modelProps = modelProps;\n        this.actions = actions;\n        this.routes = {};\n        this.cachedNode = h(\"div#default\");\n        this.allowAsyncRender = true;\n        this.stateIsMutated = false;\n        /**\n         * The function used to render VNodes for insertion into the page DOM.\n         * This method should be configured by calling FRETS.registerView(...)\n         * @param  {string} id?\n         */\n        this.stateRenderer = function (id) {\n            if (id === void 0) { id = \"default\"; }\n            return h(\"div#\" + id, [\"Default FRETS: assign a render method using `.registerView()`\"]);\n        };\n        /**\n         * Sets up a render function for the app\n         * @param  {(props:T,actions:U)=>VNode} renderFn\n         */\n        this.registerView = function (renderFn) {\n            _this.stateRenderer = function () { return h(\"div#\" + _this.rootId, [renderFn(_this)]); };\n        };\n        /**\n         * Regisers a function that returns a promise of a VNode - this will be called and the UI\n         * will be rerendered upon the resolution of that function. This allows for lazy loading\n         * of UI modules that aren't needed right away.\n         * @param  {(props:T,actions:U)=>Promise<VNode>} renderFn\n         */\n        this.registerViewAsync = function (renderFn) { return __awaiter(_this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                this.stateRenderer = function () {\n                    // console.log(\"Async state render function executing. allow async render: \" + this.allowAsyncRender);\n                    if (_this.allowAsyncRender) {\n                        renderFn(_this.modelProps, _this.actions).then(function (n) {\n                            // at this point the lazy loading should be complete so let's invalidate the cache and render again once\n                            _this.cache.invalidate();\n                            _this.allowAsyncRender = false;\n                            // console.log(\"loaded view code, scheduling render with new VNode\");\n                            _this.cachedNode = n;\n                            _this.render(_this.modelProps);\n                        });\n                    }\n                    return h(\"div#\" + _this.rootId, [_this.cachedNode]);\n                };\n                return [2 /*return*/];\n            });\n        }); };\n        /**\n         * The Render function is useful for when an async promise resolves (like from a network request) - and you need\n         *  to update the props and re-render the app with the new data.\n         * @param  {T} props\n         */\n        this.render = function (props, recalculate) {\n            if (recalculate === void 0) { recalculate = true; }\n            // console.log(\"Render: checking the cache\");\n            _this.cache.result([JSON.stringify(props)], function () {\n                // console.log(\"Render: props have changed. \", JSON.stringify(this.modelProps));\n                if (!_this.stateIsMutated || recalculate) {\n                    _this.mutate(props);\n                }\n                _this.projector.scheduleRender();\n                _this.stateIsMutated = false;\n                return props;\n            });\n        };\n        /**\n         * Mount the application to the DOM.\n         * @param  {string} id The id of the dom element to replace\n         */\n        this.mountTo = function (id) {\n            // console.log(\"Mount To\");\n            _this.mutate(_this.modelProps);\n            _this.projector.merge(document.getElementById(id), _this.stateRenderer);\n        };\n        /**\n         * Returns a function that accepts an action function, Wraps the action with our necessary hooks, and returns a\n         * funtion compatible with the standard Maquette event handler signature.\n         * @param  {(props:T)=>void} presenterFn A reference to the main FRETS render function for this instance.\n         * @param  {T} data\n         */\n        this.makeActionStately = function (presenterFn, data) {\n            // this function will return functions that can be used as actions in a view\n            return function (actionFn) {\n                return function (e) {\n                    // since state has probably changed lets allow async rendering once\n                    // console.log(\"event handled: action \" + actionFn.name + \" event.target = \" + (e.target as HTMLElement).id);\n                    _this.allowAsyncRender = true;\n                    var box = Object.assign({}, _this.modelProps); // make a new copy of model data\n                    var newData = actionFn(e, box);\n                    _this.mutate(newData);\n                    presenterFn(_this.modelProps);\n                };\n            };\n        };\n        // the following methods should be overwritten by the Dev during setup, but its ok to work with these defaults\n        /**\n         * Check for any properties that are invalid or out of bounds and either reset them or add validation/warning messages\n         *  somewhere on the props for display. Please make this function idempotent. Overwrite this with your own specifc\n         *  implementation. It can return an updated state object containing validation error messages as well as returning\n         *  false in the tuple to make mutation stop early and show errors to the user. The calculate method and route methods\n         * will not be called when your validate method returns false in the second parameter of the return tuple.\n         * @param  {T} newProps\n         * @param  {T} oldProps\n         */\n        this.validator = function (p, o) { return [p, true]; };\n        /**\n         * The primary state calculation method, looks at all the properties and updates any derived values based on changes.\n         * Please make this function idempotent. Overwrite this with your own specific implementation.\n         * @param  {T} newProps\n         * @param  {T} oldProps\n         */\n        this.calculator = function (p, o) { return p; };\n        var context = this;\n        this.projector = createProjector();\n        this.cache = maquette.createCache();\n        this.registerAction = this.makeActionStately(function stateUpdater(props) {\n            context.render(props, false);\n        }, this.modelProps);\n        window.onpopstate = function (evt) {\n            context.render(context.modelProps);\n        };\n    }\n    /**\n     * Returns a path when given the key of a route that was previously registered.\n     * @param  {string} key\n     * @param  {any} data? A route data object\n     * @returns string\n     */\n    FRETS.prototype.getRouteLink = function (key, data) {\n        return this.routes[key].spec.build(data || {});\n    };\n    /**\n     * Change the browser location to match the path configured in the route with the\n     * provided key. You still need to call an action to udpate state before the UI will re-render.\n     * @param  {string} key\n     * @param  {any} data?\n     */\n    FRETS.prototype.navToRoute = function (key, data) {\n        var r = this.getRouteLink(key, data);\n        if (r) {\n            this.navToPath(r);\n        }\n    };\n    /**\n     * Update the browser location with the provided raw string path.\n     * @param  {string} path\n     */\n    FRETS.prototype.navToPath = function (path) {\n        window.history.pushState({}, null, path);\n    };\n    /**\n     * Registers simple form fields on the property model, and on the actions to update it. If the field key hasn't been\n     * registered yet, it initializes that value on the properties with the value passed in. This makes it so that UI\n     * functions can register themselves on the props and the actions without the root app needing to know about it.\n     * @param  {string} key\n     * @param  {S} initialValue?\n     * @returns IRegisteredField\n     */\n    FRETS.prototype.registerField = function (key, initialValue) {\n        if (!this.modelProps.registeredFieldsValues[key]) {\n            this.modelProps.registeredFieldsValues[key] = initialValue || \"\";\n            this.modelProps.registeredFieldValidationErrors[key] = [];\n        }\n        if (!this.actions.registeredFieldActions[key]) {\n            this.actions.registeredFieldActions[key] = this.registerAction(function (evt, data) {\n                data.registeredFieldsValues[key] = evt.target.value;\n                return data;\n            });\n        }\n        return this.getField(key);\n    };\n    /**\n     * Returns the field object that was previously registered with the given key.\n     * Including an event handler that will update the field. Any validation errors on the field,\n     * and whatever the current value is.\n     * @param  {string} key\n     * @returns IRegisteredField\n     */\n    FRETS.prototype.getField = function (key) {\n        return {\n            handler: this.actions.registeredFieldActions[key],\n            validationErrors: this.modelProps.registeredFieldValidationErrors[key],\n            value: this.modelProps.registeredFieldsValues[key],\n        };\n    };\n    /**\n     * Register a new route that will execute the given function whenever the provided path\n     *  is matched during the model mutation step. This function should update the app state\n     * properties to reflect the status that is indicated by the given route. The keys are useful for\n     * navigation methods that need to refer to a route programmatically later.\n     * (see path-parser documentation at https://github.com/troch/path-parser).\n     * @param  {string} routeName\n     * @param  {string} path\n     * @param  {(routeName:string,routeParams:any,props:T)=>T} fn\n     */\n    FRETS.prototype.registerRoute = function (routeName, path, fn) {\n        this.routes[routeName] = {\n            calculator: fn,\n            spec: new Path(path),\n        };\n    };\n    /**\n     * The one and only place that this application model state is updated, first it runs the validation method,\n     * then it runs any route functions, and finally runs the real state calculation method.\n     * @param  {T} props\n     */\n    FRETS.prototype.mutate = function (props) {\n        var _a;\n        var isValid = true;\n        var data = Object.assign({}, props);\n        this.stateIsMutated = true;\n        _a = this.validator(data, this.modelProps), data = _a[0], isValid = _a[1];\n        if (!isValid) {\n            this.modelProps = data;\n            return;\n        }\n        data = this.applyRouteFunction(data);\n        data = this.calculator(data, this.modelProps);\n        this.modelProps = data;\n    };\n    /**\n     * Checks to see if any of the registerd routes are matched and then updates the app state using\n     * the provided transformation function.\n     * @param  {T} props\n     * @returns T\n     */\n    FRETS.prototype.applyRouteFunction = function (props) {\n        var data = Object.assign({}, props);\n        for (var key in this.routes) {\n            if (this.routes.hasOwnProperty(key)) {\n                var entry = this.routes[key];\n                var res = entry.spec.test(window.location.pathname);\n                // console.log(\"Looking for Route\", key, res);\n                if (res) {\n                    data = entry.calculator(key, res, data);\n                    return data; // only apply the first route that matches for now\n                }\n            }\n        }\n        return data; // fall through to default\n    };\n    return FRETS;\n}());\nexport { FRETS };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRnJldHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvRnJldHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQW9CLGVBQWUsRUFBRSxDQUFDLEVBQW9CLE1BQU0sVUFBVSxDQUFDO0FBQ2xGLE9BQU8sS0FBSyxRQUFRLE1BQU0sVUFBVSxDQUFDO0FBQ3JDLE9BQU8sSUFBSSxNQUFNLGFBQWEsQ0FBQztBQWlCL0I7OztHQUdHO0FBQ0g7SUFxQkU7Ozs7T0FJRztJQUNILGVBQW1CLFVBQWEsRUFBUyxPQUFVO1FBQW5ELGlCQVVDO1FBVmtCLGVBQVUsR0FBVixVQUFVLENBQUc7UUFBUyxZQUFPLEdBQVAsT0FBTyxDQUFHO1FBZDVDLFdBQU0sR0FBc0IsRUFBRSxDQUFDO1FBSTlCLGVBQVUsR0FBVSxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFckMscUJBQWdCLEdBQVksSUFBSSxDQUFDO1FBQ2pDLG1CQUFjLEdBQVksS0FBSyxDQUFDO1FBa0J4Qzs7OztXQUlHO1FBQ0ksa0JBQWEsR0FBMkIsVUFBQyxFQUFzQjtZQUF0QixtQkFBQSxFQUFBLGNBQXNCO1lBQ3BFLE9BQUEsQ0FBQyxDQUFDLFNBQU8sRUFBSSxFQUFFLENBQUMsK0RBQStELENBQUMsQ0FBQztRQUFqRixDQUFpRixDQUFBO1FBRW5GOzs7V0FHRztRQUNJLGlCQUFZLEdBQUcsVUFBQyxRQUFxQztZQUN4RCxLQUFJLENBQUMsYUFBYSxHQUFHLGNBQU0sT0FBQSxDQUFDLENBQUMsU0FBTyxLQUFJLENBQUMsTUFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUksQ0FBQyxDQUFDLENBQUMsRUFBekMsQ0FBeUMsQ0FBQztRQUN2RSxDQUFDLENBQUE7UUFDTDs7Ozs7V0FLRztRQUNNLHNCQUFpQixHQUFHLFVBQU8sUUFBa0Q7OztnQkFDbEYsSUFBSSxDQUFDLGFBQWEsR0FBRztvQkFDbkIs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","var PropsWithFields = /** @class */ (function () {\n    function PropsWithFields() {\n        this.registeredFieldsValues = {};\n        this.registeredFieldValidationErrors = {};\n    }\n    return PropsWithFields;\n}());\nexport { PropsWithFields };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvcHNGaWVsZFJlZ2lzdHJ5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL1Byb3BzRmllbGRSZWdpc3RyeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtJQUFBO1FBQ1MsMkJBQXNCLEdBRXpCLEVBQUUsQ0FBQztRQUVBLG9DQUErQixHQUVqQyxFQUFFLENBQUM7SUFDVixDQUFDO0lBQUQsc0JBQUM7QUFBRCxDQUFDLEFBUkQsSUFRQyJ9","var ActionsWithFields = /** @class */ (function () {\n    function ActionsWithFields() {\n        this.registeredFieldActions = {};\n    }\n    return ActionsWithFields;\n}());\nexport { ActionsWithFields };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWN0aW9uc0ZpZWxkUmVnaXN0cnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvQWN0aW9uc0ZpZWxkUmVnaXN0cnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFBQTtRQUNTLDJCQUFzQixHQUV6QixFQUFFLENBQUM7SUFDVCxDQUFDO0lBQUQsd0JBQUM7QUFBRCxDQUFDLEFBSkQsSUFJQyJ9"],"names":["parse","build","this","maquette.createCache"],"mappings":"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"}